<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.aioveu.boot.aioveuEmployee.mapper.AioveuEmployeeMapper">

    <!-- 获取员工信息分页列表 -->
    <select id="getAioveuEmployeePage" resultType="com.aioveu.boot.aioveuEmployee.model.vo.AioveuEmployeeVO">
        SELECT
                employee_id,
                emp_code,
                name,
                gender,
                birth_date,
                id_card,
                phone,
                email,
                dept_id,
                position_id,
                hire_date,
                salary,
                status,
                create_time,
                update_time
        FROM
            aioveu_employee
        <where>

<!--            &lt;!&ndash; 部门ID查询 &ndash;&gt;-->
<!--            <if test="queryParams.deptId != null">-->
<!--                AND e.dept_id = #{queryParams.deptId}-->
<!--            </if>-->

<!--            &lt;!&ndash; 岗位ID查询 &ndash;&gt;-->
<!--            <if test="queryParams.positionId != null">-->
<!--                AND e.position_id = #{queryParams.positionId}-->
<!--            </if>-->

            <if test="queryParams.employeeId != null">
                AND employee_id LIKE CONCAT('%', #{queryParams.employeeId}, '%')
            </if>
            <if test="queryParams.empCode != null and queryParams.empCode != ''">
                AND emp_code LIKE CONCAT('%', #{queryParams.empCode}, '%')
            </if>
            <if test="queryParams.name != null and queryParams.name != ''">
                AND name LIKE CONCAT('%', #{queryParams.name}, '%')
            </if>
            <if test="queryParams.gender != null">
                AND gender LIKE CONCAT('%', #{queryParams.gender}, '%')
            </if>
            <if test="queryParams.birthDate != null">
                <if test="queryParams.birthDate[0] != null and queryParams.birthDate[0] != ''">
                    <bind name="startDate" value="queryParams.birthDate[0].length() == 10 ? queryParams.birthDate[0] + ' 00:00:00' : queryParams.birthDate[0]"/>
                    AND birth_date &gt;= #{startDate}
                </if>
                <if test="queryParams.birthDate[1] != null and queryParams.birthDate[1] != ''">
                    <bind name="endDate" value="queryParams.birthDate[1].length() == 10 ? queryParams.birthDate[1] + ' 23:59:59' : queryParams.birthDate[1]"/>
                    AND birth_date &lt;= #{endDate}
                </if>
            </if>
            <if test="queryParams.idCard != null and queryParams.idCard != ''">
                AND id_card LIKE CONCAT('%', #{queryParams.idCard}, '%')
            </if>
            <if test="queryParams.phone != null and queryParams.phone != ''">
                AND phone LIKE CONCAT('%', #{queryParams.phone}, '%')
            </if>
            <if test="queryParams.email != null and queryParams.email != ''">
                AND email LIKE CONCAT('%', #{queryParams.email}, '%')
            </if>
            <if test="queryParams.deptId != null">
                AND dept_id LIKE CONCAT('%', #{queryParams.deptId}, '%')
            </if>
            <if test="queryParams.positionId != null">
                AND position_id LIKE CONCAT('%', #{queryParams.positionId}, '%')
            </if>
            <if test="queryParams.hireDate != null">
                <if test="queryParams.hireDate[0] != null and queryParams.hireDate[0] != ''">
                    <bind name="startDate" value="queryParams.hireDate[0].length() == 10 ? queryParams.hireDate[0] + ' 00:00:00' : queryParams.hireDate[0]"/>
                    AND hire_date &gt;= #{startDate}
                </if>
                <if test="queryParams.hireDate[1] != null and queryParams.hireDate[1] != ''">
                    <bind name="endDate" value="queryParams.hireDate[1].length() == 10 ? queryParams.hireDate[1] + ' 23:59:59' : queryParams.hireDate[1]"/>
                    AND hire_date &lt;= #{endDate}
                </if>
            </if>
            <if test="queryParams.salary != null">
                AND salary LIKE CONCAT('%', #{queryParams.salary}, '%')
            </if>
            <if test="queryParams.status != null">
                AND status LIKE CONCAT('%', #{queryParams.status}, '%')
            </if>
            <if test="queryParams.createTime != null">
                <if test="queryParams.createTime[0] != null and queryParams.createTime[0] != ''">
                    <bind name="startDate" value="queryParams.createTime[0].length() == 10 ? queryParams.createTime[0] + ' 00:00:00' : queryParams.createTime[0]"/>
                    AND create_time &gt;= #{startDate}
                </if>
                <if test="queryParams.createTime[1] != null and queryParams.createTime[1] != ''">
                    <bind name="endDate" value="queryParams.createTime[1].length() == 10 ? queryParams.createTime[1] + ' 23:59:59' : queryParams.createTime[1]"/>
                    AND create_time &lt;= #{endDate}
                </if>
            </if>
            <if test="queryParams.updateTime != null">
                <if test="queryParams.updateTime[0] != null and queryParams.updateTime[0] != ''">
                    <bind name="startDate" value="queryParams.updateTime[0].length() == 10 ? queryParams.updateTime[0] + ' 00:00:00' : queryParams.updateTime[0]"/>
                    AND update_time &gt;= #{startDate}
                </if>
                <if test="queryParams.updateTime[1] != null and queryParams.updateTime[1] != ''">
                    <bind name="endDate" value="queryParams.updateTime[1].length() == 10 ? queryParams.updateTime[1] + ' 23:59:59' : queryParams.updateTime[1]"/>
                    AND update_time &lt;= #{endDate}
                </if>
            </if>
        </where>
    </select>

</mapper>
