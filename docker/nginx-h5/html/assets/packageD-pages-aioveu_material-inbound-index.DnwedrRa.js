import{d as e,h as a,y as l,Y as t,z as u,a as s,w as o,$ as n,i,o as d,e as r,b as c,s as f,g as m,t as v,a4 as _,a6 as p,a0 as b,c as g,F as h,r as N,X as y,aa as k,aI as w,aJ as C}from"./index-5U173LQ3.js";import{A as I}from"./aioveu-inbound.C8Ihxqct.js";import{A}from"./aioveu-material.D870okzX.js";import{A as j}from"./aioveu-warehouse.DBFoddqK.js";import{A as x}from"./aioveu-employee.BSG7yiTE.js";import{D}from"./dict.R0KYYCD_.js";import{_ as P}from"./_plugin-vue_export-helper.BCo6x5W8.js";const T=P(e({__name:"index",setup(e){const P=a(!1),T=a([]),V=a(0),z=a(!1),S=l({pageNum:1,pageSize:10}),M=a([]),O=a([]),U=a([]),$=a([]),q=a([]),B=a(-1),E=a(-1),F=a(-1),J=a(-1),L=a(void 0),Q=()=>{z.value=!z.value},W=e=>{const a=e.detail.value;B.value=a,O.value[a]&&(S.materialName=O.value[a].materialName)},X=e=>{const a=e.detail.value;E.value=a,U.value[a]&&(S.warehouseName=U.value[a].warehouseName)},Y=e=>{const a=e.detail.value;F.value=a,$.value[a]&&(S.operatorName=$.value[a].employeeName)},G=e=>{const a=e.detail.value;J.value=a,q.value[a]&&(S.inboundType=Number(q.value[a].value))},H=()=>{P.value=!0,I.getPage(S).then((e=>{M.value=e.list,V.value=e.total})).catch((e=>{console.error("æŸ¥è¯¢å…¥åº“å¤±è´¥:",e),n({title:"åŠ è½½æ•°æ®å¤±è´¥",icon:"none"})})).finally((()=>{P.value=!1}))},K=()=>{S.pageNum=1,S.inboundNo="",S.materialName="",S.warehouseName="",S.inboundType=void 0,S.operatorName="",B.value=-1,E.value=-1,F.value=-1,J.value=-1,M.value=[],H()},R=()=>{S.pageNum>1&&(S.pageNum--,H())},Z=()=>{S.pageNum*S.pageSize<V.value&&(S.pageNum++,H())},ee=a(!1);t((()=>{ee.value&&(H(),ee.value=!1)}));const ae=e=>{ee.value=!0,L.value=e;let a="/packageD/pages/aioveu_material/inbound/form";void 0!==e&&(a+=`?id=${e}`),y({url:a})},le=e=>{const a=e?[e]:T.value;0!==a.length?k({title:"æç¤º",content:"ç¡®è®¤åˆ é™¤é€‰ä¸­çš„å…¥åº“è®°å½•å—ï¼Ÿ",success:e=>{e.confirm&&(w({title:"åˆ é™¤ä¸­..."}),I.deleteByIds(a.join(",")).then((()=>{n({title:"åˆ é™¤æˆåŠŸ",icon:"success"}),K()})).catch((e=>{console.error("åˆ é™¤å¤±è´¥:",e),n({title:"åˆ é™¤å¤±è´¥",icon:"none"})})).finally((()=>C())))}}):n({title:"è¯·é€‰æ‹©è¦åˆ é™¤çš„å…¥åº“è®°å½•",icon:"none"})},te=e=>{const a=q.value.find((a=>Number(a.value)===e));return a?a.label:"æœªçŸ¥ç±»åž‹"};return u((()=>{H(),A.getAllMaterialOptions().then((e=>{Array.isArray(e)&&(O.value=e.map((e=>({materialId:Number(e.materialId),materialName:e.materialName}))))})).catch((e=>{console.error("åŠ è½½ç‰©èµ„åˆ—è¡¨å¤±è´¥:",e)})),j.getAllWarehouseOptions().then((e=>{Array.isArray(e)&&(U.value=e.map((e=>({warehouseId:Number(e.warehouseId),warehouseName:e.warehouseName}))))})).catch((e=>{console.error("åŠ è½½ä»“åº“åˆ—è¡¨å¤±è´¥:",e)})),x.getAllEmployeeOptions().then((e=>{Array.isArray(e)&&($.value=e.map((e=>({employeeId:Number(e.employeeId),employeeName:e.employeeName}))))})).catch((e=>{console.error("åŠ è½½å‘˜å·¥åˆ—è¡¨å¤±è´¥:",e)})),D.getDictItems("inbound_type").then((e=>{q.value=e})).catch((e=>{console.error("åŠ è½½å…¥åº“ç±»åž‹å¤±è´¥:",e)}))})),(e,a)=>{const l=f,t=i,u=_,n=p,y=b;return d(),s(t,{class:"app-container"},{default:o((()=>[r(t,{class:"search-container"},{default:o((()=>[r(t,{class:"filter-header",onClick:Q},{default:o((()=>[r(l,null,{default:o((()=>[m("ðŸ” ç­›é€‰æ¡ä»¶")])),_:1}),r(l,null,{default:o((()=>[m(v(z.value?"â–²":"â–¼"),1)])),_:1})])),_:1}),z.value?(d(),s(t,{key:0,class:"filter-content"},{default:o((()=>[r(t,{class:"filter-item"},{default:o((()=>[r(l,{class:"filter-label"},{default:o((()=>[m("å…¥åº“ID")])),_:1}),r(u,{type:"text",class:"filter-input",placeholder:"è¯·è¾“å…¥å…¥åº“ID",modelValue:S.id,"onUpdate:modelValue":a[0]||(a[0]=e=>S.id=e),onConfirm:H},null,8,["modelValue"])])),_:1}),r(t,{class:"filter-item"},{default:o((()=>[r(l,{class:"filter-label"},{default:o((()=>[m("å…¥åº“å•å·")])),_:1}),r(u,{type:"text",class:"filter-input",placeholder:"è¯·è¾“å…¥å…¥åº“å•å·",modelValue:S.inboundNo,"onUpdate:modelValue":a[1]||(a[1]=e=>S.inboundNo=e),onConfirm:H},null,8,["modelValue"])])),_:1}),r(t,{class:"filter-item"},{default:o((()=>[r(l,{class:"filter-label"},{default:o((()=>[m("ç‰©èµ„")])),_:1}),r(n,{class:"filter-picker",mode:"selector",range:O.value,"range-key":"materialName",value:B.value,onChange:W},{default:o((()=>[r(t,{class:"picker-view"},{default:o((()=>[m(v(B.value>=0?O.value[B.value].materialName:"è¯·é€‰æ‹©ç‰©èµ„"),1)])),_:1})])),_:1},8,["range","value"])])),_:1}),r(t,{class:"filter-item"},{default:o((()=>[r(l,{class:"filter-label"},{default:o((()=>[m("ä»“åº“")])),_:1}),r(n,{class:"filter-picker",mode:"selector",range:U.value,"range-key":"warehouseName",value:E.value,onChange:X},{default:o((()=>[r(t,{class:"picker-view"},{default:o((()=>[m(v(E.value>=0?U.value[E.value].warehouseName:"è¯·é€‰æ‹©ä»“åº“"),1)])),_:1})])),_:1},8,["range","value"])])),_:1}),r(t,{class:"filter-item"},{default:o((()=>[r(l,{class:"filter-label"},{default:o((()=>[m("å…¥åº“ç±»åž‹")])),_:1}),r(n,{class:"filter-picker",mode:"selector",range:q.value,"range-key":"label",value:J.value,onChange:G},{default:o((()=>[r(t,{class:"picker-view"},{default:o((()=>[m(v(J.value>=0?q.value[J.value].label:"è¯·é€‰æ‹©å…¥åº“ç±»åž‹"),1)])),_:1})])),_:1},8,["range","value"])])),_:1}),r(t,{class:"filter-item"},{default:o((()=>[r(l,{class:"filter-label"},{default:o((()=>[m("æ“ä½œå‘˜")])),_:1}),r(n,{class:"filter-picker",mode:"selector",range:$.value,"range-key":"employeeName",value:F.value,onChange:Y},{default:o((()=>[r(t,{class:"picker-view"},{default:o((()=>[m(v(F.value>=0?$.value[F.value].employeeName:"è¯·é€‰æ‹©æ“ä½œå‘˜"),1)])),_:1})])),_:1},8,["range","value"])])),_:1}),r(t,{class:"filter-buttons"},{default:o((()=>[r(y,{class:"filter-btn reset",onClick:K},{default:o((()=>[m("é‡ç½®")])),_:1}),r(y,{class:"filter-btn confirm",onClick:H},{default:o((()=>[m("æœç´¢")])),_:1})])),_:1})])),_:1})):c("",!0)])),_:1}),r(t,{class:"action-buttons"},{default:o((()=>[r(y,{"v-has-perm":["aioveuInbound:aioveuProcurement-inbound:add"],class:"action-btn add",onClick:a[2]||(a[2]=e=>ae())},{default:o((()=>[r(l,null,{default:o((()=>[m("+")])),_:1}),r(l,null,{default:o((()=>[m("æ–°å¢ž")])),_:1})])),_:1}),r(y,{"v-has-perm":["aioveuInbound:aioveuProcurement-inbound:delete"],class:"action-btn delete",disabled:0===T.value.length,onClick:a[3]||(a[3]=e=>le())},{default:o((()=>[r(l,null,{default:o((()=>[m("ðŸ—‘ï¸")])),_:1}),r(l,null,{default:o((()=>[m("åˆ é™¤")])),_:1})])),_:1},8,["disabled"])])),_:1}),r(t,{class:"list-container"},{default:o((()=>[P.value?(d(),s(t,{key:0,class:"loading-state"},{default:o((()=>[r(l,null,{default:o((()=>[m("åŠ è½½ä¸­...")])),_:1})])),_:1})):0===M.value.length?(d(),s(t,{key:1,class:"empty-state"},{default:o((()=>[r(l,{class:"empty-icon"},{default:o((()=>[m("ðŸ“¦")])),_:1}),r(l,{class:"empty-text"},{default:o((()=>[m("æš‚æ— å…¥åº“æ•°æ®")])),_:1})])),_:1})):(d(!0),g(h,{key:2},N(M.value,(e=>(d(),s(t,{key:e.id,class:"inbound-card"},{default:o((()=>[r(t,{class:"card-header"},{default:o((()=>[r(l,{class:"inbound-id"},{default:o((()=>[m("ID: "+v(e.id),1)])),_:2},1024),r(l,{class:"inbound-no"},{default:o((()=>[m(v(e.inboundNo),1)])),_:2},1024)])),_:2},1024),r(t,{class:"card-content"},{default:o((()=>[r(t,{class:"info-row"},{default:o((()=>[r(l,{class:"info-label"},{default:o((()=>[m("ç‰©èµ„:")])),_:1}),r(l,{class:"info-value"},{default:o((()=>[m(v(e.materialName),1)])),_:2},1024)])),_:2},1024),r(t,{class:"info-row"},{default:o((()=>[r(l,{class:"info-label"},{default:o((()=>[m("ä»“åº“:")])),_:1}),r(l,{class:"info-value"},{default:o((()=>[m(v(e.warehouseName),1)])),_:2},1024)])),_:2},1024),r(t,{class:"info-row"},{default:o((()=>[r(l,{class:"info-label"},{default:o((()=>[m("æ•°é‡:")])),_:1}),r(l,{class:"info-value"},{default:o((()=>[m(v(e.quantity),1)])),_:2},1024)])),_:2},1024),r(t,{class:"info-row"},{default:o((()=>[r(l,{class:"info-label"},{default:o((()=>[m("å•ä»·:")])),_:1}),r(l,{class:"info-value"},{default:o((()=>[m(v(e.unitPrice),1)])),_:2},1024)])),_:2},1024),r(t,{class:"info-row"},{default:o((()=>[r(l,{class:"info-label"},{default:o((()=>[m("æ€»é‡‘é¢:")])),_:1}),r(l,{class:"info-value"},{default:o((()=>[m(v(e.totalAmount),1)])),_:2},1024)])),_:2},1024),r(t,{class:"info-row"},{default:o((()=>[r(l,{class:"info-label"},{default:o((()=>[m("æ‰¹æ¬¡å·:")])),_:1}),r(l,{class:"info-value"},{default:o((()=>[m(v(e.batchNumber||"æ— "),1)])),_:2},1024)])),_:2},1024),r(t,{class:"info-row"},{default:o((()=>[r(l,{class:"info-label"},{default:o((()=>[m("å…¥åº“ç±»åž‹:")])),_:1}),r(l,{class:"info-value"},{default:o((()=>[m(v(te(e.inboundType)),1)])),_:2},1024)])),_:2},1024),r(t,{class:"info-row"},{default:o((()=>[r(l,{class:"info-label"},{default:o((()=>[m("æ“ä½œå‘˜:")])),_:1}),r(l,{class:"info-value"},{default:o((()=>[m(v(e.operatorName),1)])),_:2},1024)])),_:2},1024),r(t,{class:"info-row"},{default:o((()=>[r(l,{class:"info-label"},{default:o((()=>[m("å…¥åº“æ—¶é—´:")])),_:1}),r(l,{class:"info-value"},{default:o((()=>[m(v(e.inTime),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),r(t,{class:"card-footer"},{default:o((()=>[r(t,{class:"time-info"},{default:o((()=>[r(l,null,{default:o((()=>[m("åˆ›å»º: "+v(e.createTime),1)])),_:2},1024),r(l,null,{default:o((()=>[m("æ›´æ–°: "+v(e.updateTime),1)])),_:2},1024)])),_:2},1024),r(t,{class:"action-buttons"},{default:o((()=>[r(y,{"v-has-perm":["aioveuInbound:aioveuProcurement-inbound:edit"],class:"action-btn edit",onClick:a=>ae(e.id)},{default:o((()=>[r(l,null,{default:o((()=>[m("âœï¸")])),_:1}),r(l,null,{default:o((()=>[m("ç¼–è¾‘")])),_:1})])),_:2},1032,["onClick"]),r(y,{"v-has-perm":["aioveuInbound:aioveuProcurement-inbound:delete"],class:"action-btn delete",onClick:a=>le(e.id)},{default:o((()=>[r(l,null,{default:o((()=>[m("ðŸ—‘ï¸")])),_:1}),r(l,null,{default:o((()=>[m("åˆ é™¤")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),V.value>0?(d(),s(t,{key:3,class:"pagination"},{default:o((()=>[r(y,{class:"pagination-btn",disabled:S.pageNum<=1,onClick:R},{default:o((()=>[m(" ä¸Šä¸€é¡µ ")])),_:1},8,["disabled"]),r(l,{class:"page-info"},{default:o((()=>[m(v(S.pageNum)+" / "+v(Math.ceil(V.value/S.pageSize)),1)])),_:1}),r(y,{class:"pagination-btn",disabled:S.pageNum*S.pageSize>=V.value,onClick:Z},{default:o((()=>[m(" ä¸‹ä¸€é¡µ ")])),_:1},8,["disabled"])])),_:1})):c("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-b44e314a"]]);export{T as default};
