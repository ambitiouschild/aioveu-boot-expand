import{d as e,h as a,k as s,a as t,o as l,i as n,w as o,e as c,f as i,n as d,b as u,v as r,g as m,t as p,c as _,r as f,a0 as w,F as h,q as k}from"./index-5U173LQ3.js";import{w as y}from"./wd-popup.BsbILK4T.js";import{r as g,b,c as x,a as v,x as C,m as $,_ as z,j as I}from"./wd-icon.CDbxLjoy.js";import{w as V}from"./wd-overlay.iGBdgU4M.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";const A=j(e({name:"wd-action-sheet",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...x,customHeaderClass:$(""),modelValue:{...b(!1),...g(Boolean)},actions:C(),panels:C(),title:String,cancelText:String,closeOnClickAction:b(!0),closeOnClickModal:b(!0),duration:v(200),zIndex:v(10),lazyRender:b(!0),safeAreaInsetBottom:b(!0)},emits:["select","click-modal","cancel","closed","close","open","opened","update:modelValue"],setup(e,{emit:g}){const b=e,x=g,v=a([]),C=a(!1);function $(){return b.panels.length&&!I(b.panels[0])}function j(e,a,s){if("action"===a){if(b.actions[e].disabled||b.actions[e].loading)return;x("select",{item:b.actions[e],index:e})}else $()?x("select",{item:b.panels[Number(s)],index:s}):x("select",{item:b.panels[e][Number(s)],rowIndex:e,colIndex:s});b.closeOnClickAction&&B()}function A(){x("click-modal")}function O(){x("cancel"),B()}function B(){x("update:modelValue",!1),x("close")}function H(){x("open")}function M(){x("opened")}function S(){x("closed")}return s((()=>b.panels),(function(){v.value=$()?[b.panels]:b.panels}),{deep:!0,immediate:!0}),s((()=>b.modelValue),(e=>{C.value=e}),{deep:!0,immediate:!0}),(e,a)=>{const s=n,g=w,b=k;return l(),t(s,null,{default:o((()=>[c(y,{"custom-class":"wd-action-sheet__popup","custom-style":""+(e.actions&&e.actions.length||e.panels&&e.panels.length?"background: transparent;":""),modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=e=>C.value=e),duration:e.duration,position:"bottom","close-on-click-modal":e.closeOnClickModal,"safe-area-inset-bottom":e.safeAreaInsetBottom,"lazy-render":e.lazyRender,onEnter:H,onClose:B,onAfterEnter:M,onAfterLeave:S,onClickModal:A,"z-index":e.zIndex},{default:o((()=>[c(s,{class:d(`wd-action-sheet ${e.customClass}`),style:i(`${e.actions&&e.actions.length||e.panels&&e.panels.length?"margin: 0 10px calc(var(--window-bottom) + 10px) 10px; border-radius: 16px;":"margin-bottom: var(--window-bottom);"} ${e.customStyle}`)},{default:o((()=>[e.title?(l(),t(s,{key:0,class:d(`wd-action-sheet__header ${e.customHeaderClass}`)},{default:o((()=>[m(p(e.title)+" ",1),c(z,{"custom-class":"wd-action-sheet__close",name:"add",onClick:B})])),_:1},8,["class"])):u("",!0),e.actions&&e.actions.length?(l(),t(s,{key:1,class:"wd-action-sheet__actions"},{default:o((()=>[(l(!0),_(h,null,f(e.actions,((e,a)=>(l(),t(g,{key:a,class:d(`wd-action-sheet__action ${e.disabled?"wd-action-sheet__action--disabled":""}  ${e.loading?"wd-action-sheet__action--loading":""}`),style:i(`color: ${e.color}`),onClick:e=>j(a,"action")},{default:o((()=>[e.loading?(l(),t(V,{key:0,"custom-class":"`wd-action-sheet__action-loading"})):(l(),t(s,{key:1,class:"wd-action-sheet__name"},{default:o((()=>[m(p(e.name),1)])),_:2},1024)),!e.loading&&e.subname?(l(),t(s,{key:2,class:"wd-action-sheet__subname"},{default:o((()=>[m(p(e.subname),1)])),_:2},1024)):u("",!0)])),_:2},1032,["class","style","onClick"])))),128))])),_:1})):u("",!0),v.value&&v.value.length?(l(),t(s,{key:2},{default:o((()=>[(l(!0),_(h,null,f(v.value,((e,a)=>(l(),t(s,{key:a,class:"wd-action-sheet__panels"},{default:o((()=>[c(s,{class:"wd-action-sheet__panels-content"},{default:o((()=>[(l(!0),_(h,null,f(e,((e,n)=>(l(),t(s,{key:n,class:"wd-action-sheet__panel",onClick:e=>j(a,"panels",n)},{default:o((()=>[c(b,{class:"wd-action-sheet__panel-img",src:e.iconUrl},null,8,["src"]),c(s,{class:"wd-action-sheet__panel-title"},{default:o((()=>[m(p(e.title),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1})):u("",!0),r(e.$slots,"default",{},void 0,!0),e.cancelText?(l(),t(g,{key:3,class:"wd-action-sheet__cancel",onClick:O},{default:o((()=>[m(p(e.cancelText),1)])),_:1})):u("",!0)])),_:3},8,["class","style"])])),_:3},8,["custom-style","modelValue","duration","close-on-click-modal","safe-area-inset-bottom","lazy-render","z-index"])])),_:3})}}}),[["__scopeId","data-v-04c084fb"]]);export{A as w};
