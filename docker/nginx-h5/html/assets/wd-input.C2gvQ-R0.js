import{d as e,aC as l,h as a,k as s,l as o,a as n,o as t,w as r,b as i,e as u,i as c,f as d,n as p,v as f,c as m,F as h,g as y,t as g,a4 as v,s as _}from"./index-5U173LQ3.js";import{m as b,b as w,x,d as k,a as C,c as $,f as S,o as I,C as j,_ as V,t as W}from"./wd-icon.CDbxLjoy.js";import{u as E}from"./useCell.qN6vSEvF.js";import{F as P}from"./types.Prh_CF5p.js";import{u as T}from"./useParent.Bak0uCS8.js";import{u as q}from"./useTranslate.Kg86_MV8.js";import{_ as B}from"./_plugin-vue_export-helper.BCo6x5W8.js";const L=B(e({name:"wd-input",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...$,customInputClass:b(""),customLabelClass:b(""),placeholder:String,placeholderStyle:String,placeholderClass:b(""),cursorSpacing:C(0),cursor:C(-1),selectionStart:C(-1),selectionEnd:C(-1),adjustPosition:w(!0),holdKeyboard:w(!1),confirmType:b("done"),confirmHold:w(!1),focus:w(!1),type:b("text"),maxlength:{type:Number,default:-1},disabled:w(!1),alwaysEmbed:w(!1),alignRight:w(!1),modelValue:k(""),showPassword:w(!1),clearable:w(!1),readonly:w(!1),prefixIcon:String,suffixIcon:String,showWordLimit:w(!1),label:String,labelWidth:b(""),size:String,error:w(!1),center:w(!1),noBorder:w(!1),required:w(!1),prop:String,rules:x(),clearTrigger:b("always"),focusWhenClear:w(!0),ignoreCompositionEvent:w(!0),inputmode:b("text")},emits:["update:modelValue","clear","blur","focus","input","keyboardheightchange","confirm","clicksuffixicon","clickprefixicon","click"],setup(e,{emit:b}){const w=e,x=b,k=l(),{translate:C}=q("input"),$=a(!1),B=a(!1),L=a(!1),z=a(!1),F=a(function(){const e=function(e){const{maxlength:l}=w;if(S(l)&&-1!==l&&String(e).length>l)return e.toString().slice(0,l);return e}(w.modelValue);l=e,a=w.modelValue,j(String(l),String(a))||x("update:modelValue",e);var l,a;return e}()),H=E();s((()=>w.focus),(e=>{L.value=e}),{immediate:!0,deep:!0}),s((()=>w.modelValue),(e=>{F.value=S(e)?String(e):""}));const{parent:K}=T(P),M=o((()=>S(w.placeholder)?w.placeholder:C("placeholder"))),A=o((()=>{const{disabled:e,readonly:l,clearable:a,clearTrigger:s}=w;return!(!a||l||e||!F.value||!("always"===s||"focus"===w.clearTrigger&&z.value))})),O=o((()=>{const{disabled:e,readonly:l,maxlength:a,showWordLimit:s}=w;return Boolean(!e&&!l&&S(a)&&a>-1&&s)})),R=o((()=>K&&w.prop&&K.errorMessages&&K.errorMessages[w.prop]?K.errorMessages[w.prop]:"")),G=o((()=>{let e=!1;if(K&&K.props.rules){const l=K.props.rules;for(const a in l)Object.prototype.hasOwnProperty.call(l,a)&&a===w.prop&&Array.isArray(l[a])&&(e=l[a].some((e=>e.required)))}return w.required||w.rules.some((e=>e.required))||e})),N=o((()=>`wd-input  ${w.label||k.label?"is-cell":""} ${w.center?"is-center":""} ${H.border.value?"is-border":""} ${w.size?"is-"+w.size:""} ${w.error?"is-error":""} ${w.disabled?"is-disabled":""}  ${F.value&&String(F.value).length>0?"is-not-empty":""}  ${w.noBorder?"is-no-border":""} ${w.customClass}`)),U=o((()=>`wd-input__label ${w.customLabelClass} ${G.value?"is-required":""}`)),D=o((()=>`wd-input__placeholder  ${w.placeholderClass}`)),J=o((()=>w.labelWidth?I({"min-width":w.labelWidth,"max-width":w.labelWidth}):""));function Q(){$.value=!$.value}async function X(){B.value=!0,z.value=!1,F.value="",w.focusWhenClear&&(L.value=!1),await W(),w.focusWhenClear&&(L.value=!0,z.value=!0),x("update:modelValue",F.value),x("clear")}async function Y(){await W(150),B.value?B.value=!1:(z.value=!1,x("blur",{value:F.value}))}function Z({detail:e}){z.value=!0,x("focus",e)}function ee({detail:e}){x("update:modelValue",F.value),x("input",e)}function le({detail:e}){x("keyboardheightchange",e)}function ae({detail:e}){x("confirm",e)}function se(){x("clicksuffixicon")}function oe(){x("clickprefixicon")}function ne(e){x("click",e)}return(e,l)=>{const a=c,s=v,o=_;return t(),n(a,{class:p(N.value),style:d(e.customStyle),onClick:ne},{default:r((()=>[e.label||e.$slots.label?(t(),n(a,{key:0,class:p(U.value),style:d(J.value)},{default:r((()=>[e.prefixIcon||e.$slots.prefix?(t(),n(a,{key:0,class:"wd-input__prefix"},{default:r((()=>[e.prefixIcon&&!e.$slots.prefix?(t(),n(V,{key:0,"custom-class":"wd-input__icon",name:e.prefixIcon,onClick:oe},null,8,["name"])):f(e.$slots,"prefix",{key:1},void 0,!0)])),_:3})):i("",!0),u(a,{class:"wd-input__label-inner"},{default:r((()=>[e.label&&!e.$slots.label?(t(),m(h,{key:0},[y(g(e.label),1)],64)):f(e.$slots,"label",{key:1},void 0,!0)])),_:3})])),_:3},8,["class","style"])):i("",!0),u(a,{class:"wd-input__body"},{default:r((()=>[u(a,{class:"wd-input__value"},{default:r((()=>[!e.prefixIcon&&!e.$slots.prefix||e.label?i("",!0):(t(),n(a,{key:0,class:"wd-input__prefix"},{default:r((()=>[e.prefixIcon&&!e.$slots.prefix?(t(),n(V,{key:0,"custom-class":"wd-input__icon",name:e.prefixIcon,onClick:oe},null,8,["name"])):f(e.$slots,"prefix",{key:1},void 0,!0)])),_:3})),u(s,{class:p(["wd-input__inner",e.prefixIcon?"wd-input__inner--prefix":"",O.value?"wd-input__inner--count":"",e.alignRight?"is-align-right":"",e.customInputClass]),type:e.type,password:e.showPassword&&!$.value,modelValue:F.value,"onUpdate:modelValue":l[0]||(l[0]=e=>F.value=e),placeholder:M.value,disabled:e.disabled||e.readonly,maxlength:e.maxlength,focus:L.value,"confirm-type":e.confirmType,"confirm-hold":e.confirmHold,cursor:e.cursor,"cursor-spacing":e.cursorSpacing,"placeholder-style":e.placeholderStyle,"selection-start":e.selectionStart,"selection-end":e.selectionEnd,"adjust-position":e.adjustPosition,"hold-keyboard":e.holdKeyboard,"always-embed":e.alwaysEmbed,"placeholder-class":D.value,ignoreCompositionEvent:e.ignoreCompositionEvent,inputmode:e.inputmode,onInput:ee,onFocus:Z,onBlur:Y,onConfirm:ae,onKeyboardheightchange:le},null,8,["class","type","password","modelValue","placeholder","disabled","maxlength","focus","confirm-type","confirm-hold","cursor","cursor-spacing","placeholder-style","selection-start","selection-end","adjust-position","hold-keyboard","always-embed","placeholder-class","ignoreCompositionEvent","inputmode"]),w.readonly?(t(),n(a,{key:1,class:"wd-input__readonly-mask"})):i("",!0),A.value||e.showPassword||e.suffixIcon||O.value||e.$slots.suffix?(t(),n(a,{key:2,class:"wd-input__suffix"},{default:r((()=>[A.value?(t(),n(V,{key:0,"custom-class":"wd-input__clear",name:"error-fill",onClick:X})):i("",!0),e.showPassword?(t(),n(V,{key:1,"custom-class":"wd-input__icon",name:$.value?"view":"eye-close",onClick:Q},null,8,["name"])):i("",!0),O.value?(t(),n(a,{key:2,class:"wd-input__count"},{default:r((()=>[u(o,{class:p([F.value&&String(F.value).length>0?"wd-input__count-current":"",String(F.value).length>e.maxlength?"is-error":""])},{default:r((()=>[y(g(String(F.value).length),1)])),_:1},8,["class"]),y(" /"+g(e.maxlength),1)])),_:1})):i("",!0),e.suffixIcon&&!e.$slots.suffix?(t(),n(V,{key:3,"custom-class":"wd-input__icon",name:e.suffixIcon,onClick:se},null,8,["name"])):f(e.$slots,"suffix",{key:4},void 0,!0)])),_:3})):i("",!0)])),_:3}),R.value?(t(),n(a,{key:0,class:"wd-input__error-message"},{default:r((()=>[y(g(R.value),1)])),_:1})):i("",!0)])),_:3})])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-9e96ab80"]]);export{L as _};
