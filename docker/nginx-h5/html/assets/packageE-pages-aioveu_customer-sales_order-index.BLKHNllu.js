import{d as e,h as a,y as l,Y as s,z as t,a as u,w as o,$ as i,i as d,o as n,e as r,b as c,s as f,g as v,t as _,a4 as m,a6 as p,a0 as b,c as g,F as N,r as h,X as y,aa as k,aI as w,aJ as C}from"./index-5U173LQ3.js";import{A}from"./aioveu-sales-order.NYwjDYB-.js";import{A as I}from"./aioveu-customer.MhylDKEJ.js";import{A as S}from"./aioveu-contact.B_5Ds4O-.js";import{A as D}from"./aioveu-employee.t1i7jtWp.js";import{D as x}from"./dict.R0KYYCD_.js";import{_ as O}from"./_plugin-vue_export-helper.BCo6x5W8.js";const j=O(e({__name:"index",setup(e){const O=a(!1),j=a([]),V=a(0),z=a(!1),M=l({pageNum:1,pageSize:10}),R=a([]),T=a([]),E=a([]),U=a([]),X=a([]),$=a([]),B=a([]),F=a(-1),J=a(-1),P=a(-1),W=a(-1),Y=a(-1),Z=a(-1),q=a(void 0),G=()=>{z.value=!z.value},H=e=>{const a=e.detail.value;F.value=a,T.value[a]&&(M.customerName=T.value[a].customerName)},K=e=>{const a=e.detail.value;W.value=a,X.value[a]&&(M.paymentStatus=Number(X.value[a].value))},L=e=>{const a=e.detail.value;Y.value=a,$.value[a]&&(M.orderStatus=Number($.value[a].value))},Q=e=>{const a=e.detail.value;Z.value=a,B.value[a]&&(M.shippingMethod=Number(B.value[a].value))},ee=e=>{const a=e.detail.value;P.value=a,U.value[a]&&(M.salesRepName=U.value[a].employeeName)},ae=()=>{O.value=!0,A.getPage(M).then((e=>{R.value=e.list,V.value=e.total})).catch((e=>{console.error("æŸ¥è¯¢é”€å”®è®¢å•å¤±è´¥:",e),i({title:"åŠ è½½æ•°æ®å¤±è´¥",icon:"none"})})).finally((()=>{O.value=!1}))},le=()=>{M.pageNum=1,M.orderNo="",M.customerName="",M.paymentStatus=void 0,M.orderStatus=void 0,M.shippingMethod=void 0,M.salesRepName="",F.value=-1,J.value=-1,P.value=-1,W.value=-1,Y.value=-1,Z.value=-1,R.value=[],ae()},se=()=>{M.pageNum>1&&(M.pageNum--,ae())},te=()=>{M.pageNum*M.pageSize<V.value&&(M.pageNum++,ae())},ue=a(!1);s((()=>{ue.value&&(ae(),ue.value=!1)}));const oe=e=>{ue.value=!0,q.value=e;let a="/packageE/pages/aioveu_customer/sales_order/form";void 0!==e&&(a+=`?id=${e}`),y({url:a})},ie=e=>{const a=e?[e]:j.value;0!==a.length?k({title:"æç¤º",content:"ç¡®è®¤åˆ é™¤é€‰ä¸­çš„é”€å”®è®¢å•å—ï¼Ÿ",success:e=>{e.confirm&&(w({title:"åˆ é™¤ä¸­..."}),A.deleteByIds(a.join(",")).then((()=>{i({title:"åˆ é™¤æˆåŠŸ",icon:"success"}),le()})).catch((e=>{console.error("åˆ é™¤å¤±è´¥:",e),i({title:"åˆ é™¤å¤±è´¥",icon:"none"})})).finally((()=>C())))}}):i({title:"è¯·é€‰æ‹©è¦åˆ é™¤çš„é”€å”®è®¢å•",icon:"none"})},de=e=>{const a=X.value.find((a=>Number(a.value)===e));return a?a.label:"æœªçŸ¥"},ne=e=>{const a=$.value.find((a=>Number(a.value)===e));return a?a.label:"æœªçŸ¥"},re=e=>{const a=B.value.find((a=>Number(a.value)===e));return a?a.label:"æœªçŸ¥"};return t((()=>{ae(),I.getAllCustomerOptions().then((e=>{Array.isArray(e)&&(T.value=e.map((e=>({customerId:Number(e.customerId),customerName:e.customerName}))))})).catch((e=>{console.error("åŠ è½½å®¢æˆ·é€‰é¡¹å¤±è´¥:",e)})),S.getAllContactOptions().then((e=>{Array.isArray(e)&&(E.value=e.map((e=>({contactId:Number(e.contactId),contactName:e.contactName}))))})).catch((e=>{console.error("åŠ è½½è”ç³»äººé€‰é¡¹å¤±è´¥:",e)})),D.getAllEmployeeOptions().then((e=>{Array.isArray(e)&&(U.value=e.map((e=>({employeeId:Number(e.employeeId),employeeName:e.employeeName}))))})).catch((e=>{console.error("åŠ è½½å‘˜å·¥é€‰é¡¹å¤±è´¥:",e)})),x.getDictItems("salesOrder_payment_status").then((e=>{X.value=e})),x.getDictItems("salesOrder_order_status").then((e=>{$.value=e})),x.getDictItems("salesOrder_shipping_method").then((e=>{B.value=e}))})),(e,a)=>{const l=f,s=d,t=m,i=p,y=b;return n(),u(s,{class:"app-container"},{default:o((()=>[r(s,{class:"search-container"},{default:o((()=>[r(s,{class:"filter-header",onClick:G},{default:o((()=>[r(l,null,{default:o((()=>[v("ðŸ” ç­›é€‰æ¡ä»¶")])),_:1}),r(l,null,{default:o((()=>[v(_(z.value?"â–²":"â–¼"),1)])),_:1})])),_:1}),z.value?(n(),u(s,{key:0,class:"filter-content"},{default:o((()=>[r(s,{class:"filter-item"},{default:o((()=>[r(l,{class:"filter-label"},{default:o((()=>[v("è®¢å•ID")])),_:1}),r(t,{type:"text",class:"filter-input",placeholder:"è¯·è¾“å…¥è®¢å•ID",modelValue:M.id,"onUpdate:modelValue":a[0]||(a[0]=e=>M.id=e),onConfirm:ae},null,8,["modelValue"])])),_:1}),r(s,{class:"filter-item"},{default:o((()=>[r(l,{class:"filter-label"},{default:o((()=>[v("è®¢å•ç¼–å·")])),_:1}),r(t,{type:"text",class:"filter-input",placeholder:"è¯·è¾“å…¥è®¢å•ç¼–å·",modelValue:M.orderNo,"onUpdate:modelValue":a[1]||(a[1]=e=>M.orderNo=e),onConfirm:ae},null,8,["modelValue"])])),_:1}),r(s,{class:"filter-item"},{default:o((()=>[r(l,{class:"filter-label"},{default:o((()=>[v("å®¢æˆ·")])),_:1}),r(i,{class:"filter-picker",mode:"selector",range:T.value,"range-key":"customerName",value:F.value,onChange:H},{default:o((()=>[r(s,{class:"picker-view"},{default:o((()=>[v(_(F.value>=0?T.value[F.value].customerName:"è¯·é€‰æ‹©å®¢æˆ·"),1)])),_:1})])),_:1},8,["range","value"])])),_:1}),r(s,{class:"filter-item"},{default:o((()=>[r(l,{class:"filter-label"},{default:o((()=>[v("æ”¯ä»˜çŠ¶æ€")])),_:1}),r(i,{class:"filter-picker",mode:"selector",range:X.value,"range-key":"label",value:W.value,onChange:K},{default:o((()=>[r(s,{class:"picker-view"},{default:o((()=>[v(_(W.value>=0?X.value[W.value].label:"è¯·é€‰æ‹©æ”¯ä»˜çŠ¶æ€"),1)])),_:1})])),_:1},8,["range","value"])])),_:1}),r(s,{class:"filter-item"},{default:o((()=>[r(l,{class:"filter-label"},{default:o((()=>[v("è®¢å•çŠ¶æ€")])),_:1}),r(i,{class:"filter-picker",mode:"selector",range:$.value,"range-key":"label",value:Y.value,onChange:L},{default:o((()=>[r(s,{class:"picker-view"},{default:o((()=>[v(_(Y.value>=0?$.value[Y.value].label:"è¯·é€‰æ‹©è®¢å•çŠ¶æ€"),1)])),_:1})])),_:1},8,["range","value"])])),_:1}),r(s,{class:"filter-item"},{default:o((()=>[r(l,{class:"filter-label"},{default:o((()=>[v("è¿è¾“æ–¹å¼")])),_:1}),r(i,{class:"filter-picker",mode:"selector",range:B.value,"range-key":"label",value:Z.value,onChange:Q},{default:o((()=>[r(s,{class:"picker-view"},{default:o((()=>[v(_(Z.value>=0?B.value[Z.value].label:"è¯·é€‰æ‹©è¿è¾“æ–¹å¼"),1)])),_:1})])),_:1},8,["range","value"])])),_:1}),r(s,{class:"filter-item"},{default:o((()=>[r(l,{class:"filter-label"},{default:o((()=>[v("è´Ÿè´£äºº")])),_:1}),r(i,{class:"filter-picker",mode:"selector",range:U.value,"range-key":"employeeName",value:P.value,onChange:ee},{default:o((()=>[r(s,{class:"picker-view"},{default:o((()=>[v(_(P.value>=0?U.value[P.value].employeeName:"è¯·é€‰æ‹©è´Ÿè´£äºº"),1)])),_:1})])),_:1},8,["range","value"])])),_:1}),r(s,{class:"filter-buttons"},{default:o((()=>[r(y,{class:"filter-btn reset",onClick:le},{default:o((()=>[v("é‡ç½®")])),_:1}),r(y,{class:"filter-btn confirm",onClick:ae},{default:o((()=>[v("æœç´¢")])),_:1})])),_:1})])),_:1})):c("",!0)])),_:1}),r(s,{class:"action-buttons"},{default:o((()=>[r(y,{"v-has-perm":["aioveuSalesOrder:aioveu-sales-order:add"],class:"action-btn add",onClick:a[2]||(a[2]=e=>oe())},{default:o((()=>[r(l,null,{default:o((()=>[v("+")])),_:1}),r(l,null,{default:o((()=>[v("æ–°å¢ž")])),_:1})])),_:1}),r(y,{"v-has-perm":["aioveuSalesOrder:aioveu-sales-order:delete"],class:"action-btn delete",disabled:0===j.value.length,onClick:a[3]||(a[3]=e=>ie())},{default:o((()=>[r(l,null,{default:o((()=>[v("ðŸ—‘ï¸")])),_:1}),r(l,null,{default:o((()=>[v("åˆ é™¤")])),_:1})])),_:1},8,["disabled"])])),_:1}),r(s,{class:"list-container"},{default:o((()=>[O.value?(n(),u(s,{key:0,class:"loading-state"},{default:o((()=>[r(l,null,{default:o((()=>[v("åŠ è½½ä¸­...")])),_:1})])),_:1})):0===R.value.length?(n(),u(s,{key:1,class:"empty-state"},{default:o((()=>[r(l,{class:"empty-icon"},{default:o((()=>[v("ðŸ“¦")])),_:1}),r(l,{class:"empty-text"},{default:o((()=>[v("æš‚æ— é”€å”®è®¢å•æ•°æ®")])),_:1})])),_:1})):(n(!0),g(N,{key:2},h(R.value,(e=>(n(),u(s,{key:e.id,class:"sales-order-card"},{default:o((()=>[r(s,{class:"card-header"},{default:o((()=>[r(l,{class:"order-id"},{default:o((()=>[v("ID: "+_(e.id),1)])),_:2},1024),r(l,{class:"order-no"},{default:o((()=>[v(_(e.orderNo),1)])),_:2},1024)])),_:2},1024),r(s,{class:"card-content"},{default:o((()=>[r(s,{class:"info-row"},{default:o((()=>[r(l,{class:"info-label"},{default:o((()=>[v("å®¢æˆ·:")])),_:1}),r(l,{class:"info-value"},{default:o((()=>[v(_(e.customerName),1)])),_:2},1024)])),_:2},1024),r(s,{class:"info-row"},{default:o((()=>[r(l,{class:"info-label"},{default:o((()=>[v("è”ç³»äºº:")])),_:1}),r(l,{class:"info-value"},{default:o((()=>[v(_(e.contactName),1)])),_:2},1024)])),_:2},1024),r(s,{class:"info-row"},{default:o((()=>[r(l,{class:"info-label"},{default:o((()=>[v("ä¸‹å•æ—¶é—´:")])),_:1}),r(l,{class:"info-value"},{default:o((()=>[v(_(e.orderDate),1)])),_:2},1024)])),_:2},1024),r(s,{class:"info-row"},{default:o((()=>[r(l,{class:"info-label"},{default:o((()=>[v("é¢„è®¡äº¤è´§:")])),_:1}),r(l,{class:"info-value"},{default:o((()=>[v(_(e.expectedDelivery),1)])),_:2},1024)])),_:2},1024),r(s,{class:"info-row"},{default:o((()=>[r(l,{class:"info-label"},{default:o((()=>[v("å®žé™…äº¤è´§:")])),_:1}),r(l,{class:"info-value"},{default:o((()=>[v(_(e.actualDelivery),1)])),_:2},1024)])),_:2},1024),r(s,{class:"info-row"},{default:o((()=>[r(l,{class:"info-label"},{default:o((()=>[v("è®¢å•é‡‘é¢:")])),_:1}),r(l,{class:"info-value"},{default:o((()=>[v(_(e.totalAmount)+" "+_(e.currency),1)])),_:2},1024)])),_:2},1024),r(s,{class:"info-row"},{default:o((()=>[r(l,{class:"info-label"},{default:o((()=>[v("æŠ˜æ‰£çŽ‡:")])),_:1}),r(l,{class:"info-value"},{default:o((()=>[v(_(e.discount),1)])),_:2},1024)])),_:2},1024),r(s,{class:"info-row"},{default:o((()=>[r(l,{class:"info-label"},{default:o((()=>[v("ç¨ŽçŽ‡:")])),_:1}),r(l,{class:"info-value"},{default:o((()=>[v(_(e.taxRate),1)])),_:2},1024)])),_:2},1024),r(s,{class:"info-row"},{default:o((()=>[r(l,{class:"info-label"},{default:o((()=>[v("ç¨Žé¢:")])),_:1}),r(l,{class:"info-value"},{default:o((()=>[v(_(e.taxAmount),1)])),_:2},1024)])),_:2},1024),r(s,{class:"info-row"},{default:o((()=>[r(l,{class:"info-label"},{default:o((()=>[v("æ€»é¢:")])),_:1}),r(l,{class:"info-value"},{default:o((()=>[v(_(e.grandTotal),1)])),_:2},1024)])),_:2},1024),r(s,{class:"info-row"},{default:o((()=>[r(l,{class:"info-label"},{default:o((()=>[v("æ”¯ä»˜çŠ¶æ€:")])),_:1}),r(l,{class:"info-value"},{default:o((()=>[v(_(de(e.paymentStatus)),1)])),_:2},1024)])),_:2},1024),r(s,{class:"info-row"},{default:o((()=>[r(l,{class:"info-label"},{default:o((()=>[v("è®¢å•çŠ¶æ€:")])),_:1}),r(l,{class:"info-value"},{default:o((()=>[v(_(ne(e.orderStatus)),1)])),_:2},1024)])),_:2},1024),r(s,{class:"info-row"},{default:o((()=>[r(l,{class:"info-label"},{default:o((()=>[v("æ”¶è´§åœ°å€:")])),_:1}),r(l,{class:"info-value"},{default:o((()=>[v(_(e.shippingAddress),1)])),_:2},1024)])),_:2},1024),r(s,{class:"info-row"},{default:o((()=>[r(l,{class:"info-label"},{default:o((()=>[v("è¿è¾“æ–¹å¼:")])),_:1}),r(l,{class:"info-value"},{default:o((()=>[v(_(re(e.shippingMethod)),1)])),_:2},1024)])),_:2},1024),r(s,{class:"info-row"},{default:o((()=>[r(l,{class:"info-label"},{default:o((()=>[v("ç‰©æµå•å·:")])),_:1}),r(l,{class:"info-value"},{default:o((()=>[v(_(e.trackingNo),1)])),_:2},1024)])),_:2},1024),r(s,{class:"info-row"},{default:o((()=>[r(l,{class:"info-label"},{default:o((()=>[v("è´Ÿè´£äºº:")])),_:1}),r(l,{class:"info-value"},{default:o((()=>[v(_(e.salesRepName),1)])),_:2},1024)])),_:2},1024),r(s,{class:"info-row"},{default:o((()=>[r(l,{class:"info-label"},{default:o((()=>[v("æ“ä½œå‘˜:")])),_:1}),r(l,{class:"info-value"},{default:o((()=>[v(_(e.operatorName),1)])),_:2},1024)])),_:2},1024),r(s,{class:"info-row"},{default:o((()=>[r(l,{class:"info-label"},{default:o((()=>[v("å¤‡æ³¨:")])),_:1}),r(l,{class:"info-value"},{default:o((()=>[v(_(e.notes),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),r(s,{class:"card-footer"},{default:o((()=>[r(s,{class:"time-info"},{default:o((()=>[r(l,null,{default:o((()=>[v("åˆ›å»º: "+_(e.createTime),1)])),_:2},1024),r(l,null,{default:o((()=>[v("æ›´æ–°: "+_(e.updateTime),1)])),_:2},1024)])),_:2},1024),r(s,{class:"action-buttons"},{default:o((()=>[r(y,{"v-has-perm":["aioveuSalesOrder:aioveu-sales-order:edit"],class:"action-btn edit",onClick:a=>oe(e.id)},{default:o((()=>[r(l,null,{default:o((()=>[v("âœï¸")])),_:1}),r(l,null,{default:o((()=>[v("ç¼–è¾‘")])),_:1})])),_:2},1032,["onClick"]),r(y,{"v-has-perm":["aioveuSalesOrder:aioveu-sales-order:delete"],class:"action-btn delete",onClick:a=>ie(e.id)},{default:o((()=>[r(l,null,{default:o((()=>[v("ðŸ—‘ï¸")])),_:1}),r(l,null,{default:o((()=>[v("åˆ é™¤")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),V.value>0?(n(),u(s,{key:3,class:"pagination"},{default:o((()=>[r(y,{class:"pagination-btn",disabled:M.pageNum<=1,onClick:se},{default:o((()=>[v(" ä¸Šä¸€é¡µ ")])),_:1},8,["disabled"]),r(l,{class:"page-info"},{default:o((()=>[v(_(M.pageNum)+" / "+_(Math.ceil(V.value/M.pageSize)),1)])),_:1}),r(y,{class:"pagination-btn",disabled:M.pageNum*M.pageSize>=V.value,onClick:te},{default:o((()=>[v(" ä¸‹ä¸€é¡µ ")])),_:1},8,["disabled"])])),_:1})):c("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-739a54c8"]]);export{j as default};
