import{h as e,aH as a,d as t,aE as o,j as s,k as i,y as l,l as n,z as u,ar as c,a as r,o as d,w as v,e as m,b as p,i as h,f,a1 as g,v as b,n as w,P as _,aw as x}from"./index-5U173LQ3.js";import{_ as y}from"./wd-button.BzRx3gca.js";import{c as T,b as $,a as k,m as I,I as L,D as j,f as E,o as z,_ as C,h as F}from"./wd-icon.CDbxLjoy.js";import{w as G}from"./wd-transition.7-0aPBrJ.js";import{q as O,p as P,r as D,c as H}from"./clickoutside.C7ctyI5d.js";import{_ as Q}from"./_plugin-vue_export-helper.BCo6x5W8.js";const R=Q(t({name:"wd-fab",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...T,active:$(!1),type:I("primary"),position:I("right-bottom"),direction:I("top"),disabled:$(!1),inactiveIcon:I("add"),activeIcon:I("close"),zIndex:k(99),draggable:$(!1),gap:{type:Object,default:()=>({})},expandable:$(!0)},emits:["update:active","click"],setup(t,{expose:x,emit:T}){const $=t,k=T,I=e(!1),Q=e(!1),R=o(O,null),{proxy:q}=s();i((()=>$.active),(e=>{Q.value=e}),{immediate:!0,deep:!0}),i((()=>Q.value),(e=>{e&&(R&&R.closeOther?R.closeOther(q):H(q))}));const A=e($.direction);i((()=>$.direction),(e=>A.value=e)),i((()=>$.position),(()=>B()));const M=e(0),S=e(0),U=l({width:0,height:0}),X=l({width:56,height:56}),Y=l({minTop:0,minLeft:0,maxTop:0,maxLeft:0});function B(){const e=$.position,{minLeft:a,minTop:t,maxLeft:o,maxTop:s}=Y,i=(s+t)/2,l=(o+a)/2;switch(e){case"left-top":M.value=t,S.value=a;break;case"right-top":M.value=t,S.value=o;break;case"left-bottom":M.value=s,S.value=a;break;case"right-bottom":M.value=s,S.value=o;break;case"left-center":M.value=i,S.value=a;break;case"right-center":M.value=i,S.value=o;break;case"top-center":M.value=t,S.value=l;break;case"bottom-center":M.value=s,S.value=l}}const W=l({x:0,y:0}),J=e(!1);function K(e){if(!1===$.draggable)return;const a=e.touches[0];W.x=a.clientX-S.value,W.y=a.clientY-M.value,J.value=!1}function N(e){if(!1===$.draggable)return;const a=e.touches[0],{minLeft:t,minTop:o,maxLeft:s,maxTop:i}=Y;let l=a.clientX-W.x,n=a.clientY-W.y;l<t?l=t:l>s&&(l=s),n<o?n=o:n>i&&(n=i),M.value=n,S.value=l}function V(){if(!1===$.draggable)return;const e=U.width/2,a=S.value+X.width/2;J.value=!0,a<e?(S.value=Y.minLeft,A.value="right"):(S.value=Y.maxLeft,A.value="left")}const Z=n((()=>{const e={top:M.value+"px",left:S.value+"px",transition:J.value?"all ease 0.3s":"none"};return E($.zIndex)&&(e["z-index"]=$.zIndex),`${z(e)};${$.customStyle}`}));function ee(){$.disabled||($.expandable?(Q.value=!Q.value,k("update:active",Q.value)):k("click"))}return u((()=>{R&&R.pushToQueue?R.pushToQueue(q):P(q);const{start:t}=function(t){const o=e(null),s=()=>{L&&j(o.value)?cancelAnimationFrame(o.value):E(o.value)&&clearTimeout(o.value)};return a((()=>{s()})),{start:()=>{const e=e=>{t(e)};o.value=L?requestAnimationFrame(e):setTimeout((()=>e(Date.now())),1e3/30)},cancel:s}}((async()=>{await async function(){const e=_();try{const e=await F("#trigger",!1,q);X.width=e.width||56,X.height=e.height||56}catch(i){console.log(i)}const{top:a=16,left:t=16,right:o=16,bottom:s=16}=$.gap;U.width=e.windowWidth,U.height=L?e.windowTop+e.windowHeight:e.windowHeight,Y.minTop=L?e.windowTop+a:a,Y.minLeft=t,Y.maxLeft=U.width-X.width-o,Y.maxTop=U.height-X.height-s}(),B(),I.value=!0}));t()})),c((()=>{R&&R.removeFromQueue?R.removeFromQueue(q):D(q)})),x({open:function(){Q.value=!0,k("update:active",!0)},close:function(){Q.value=!1,k("update:active",!1)}}),(e,a)=>{const t=h;return d(),r(t,{onTouchmove:g(N,["stop","prevent"]),onTouchstart:K,onTouchend:V,class:w(`wd-fab ${e.customClass}`),style:f(Z.value),onClick:a[1]||(a[1]=g((()=>{}),["stop"]))},{default:v((()=>[m(t,{onClick:a[0]||(a[0]=g((()=>{}),["stop"])),style:f({visibility:I.value?"visible":"hidden"}),id:"trigger"},{default:v((()=>[e.$slots.trigger?b(e.$slots,"trigger",{key:0},void 0,!0):(d(),r(y,{key:1,onClick:ee,"custom-class":"wd-fab__trigger",round:"",type:e.type,disabled:e.disabled},{default:v((()=>[m(C,{"custom-class":"wd-fab__icon",name:Q.value?e.activeIcon:e.inactiveIcon},null,8,["name"])])),_:1},8,["type","disabled"]))])),_:3},8,["style"]),e.expandable?(d(),r(G,{key:0,"enter-class":`wd-fab__transition-enter--${A.value}`,"enter-active-class":"wd-fab__transition-enter-active","leave-to-class":`wd-fab__transition-leave-to--${A.value}`,"leave-active-class":"wd-fab__transition-leave-active","custom-class":`wd-fab__actions wd-fab__actions--${A.value}`,show:Q.value,duration:300},{default:v((()=>[b(e.$slots,"default",{},void 0,!0)])),_:3},8,["enter-class","leave-to-class","custom-class","show"])):p("",!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-220f2b4c"]]),q="/api/v1/roles",A={getPage:e=>x({url:`${q}/page`,method:"GET",data:e}),getOptions:()=>x({url:`${q}/options`,method:"GET"}),getRoleMenuIds:e=>x({url:`${q}/${e}/menuIds`,method:"GET"}),updateRoleMenus:(e,a)=>x({url:`${q}/${e}/menus`,method:"PUT",data:a}),getFormData:e=>x({url:`${q}/${e}/form`,method:"GET"}),add:e=>x({url:`${q}`,method:"POST",data:e}),update:(e,a)=>x({url:`${q}/${e}`,method:"PUT",data:a}),deleteByIds:e=>x({url:`${q}/${e}`,method:"DELETE"})};export{A as R,R as _};
