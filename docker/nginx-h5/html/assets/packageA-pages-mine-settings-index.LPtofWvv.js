import{d as e,a8 as s,l as i,h as a,al as l,a as t,w as n,i as o,E as c,G as r,o as u,e as p,b as d,g,s as k,X as m,$ as f,ao as _,aa as v}from"./index-5U173LQ3.js";import{_ as j}from"./wd-cell.yQBIY-AL.js";import{_ as w}from"./wd-cell-group.CJNVuq-S.js";import{_ as x}from"./wd-button.BzRx3gca.js";import{c as y}from"./auth.BcWY81ex.js";import{_ as b}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./wd-icon.CDbxLjoy.js";import"./useCell.qN6vSEvF.js";import"./useParent.Bak0uCS8.js";import"./types.DZx-jF8C.js";import"./types.Prh_CF5p.js";import"./useChildren.Crbe03ZE.js";import"./base64.3RFQOR3W.js";const C=b(e({__name:"index",setup(e){const b=s(),C=i((()=>!!b.userInfo)),h=()=>{y()&&m({url:"/packageA/pages/mine/profile/index"})},A=()=>{y()&&m({url:"/packageA/pages/mine/settings/account/index"})},B=()=>{m({url:"/packageA/pages/mine/settings/theme/index"})},F=()=>{m({url:"/packageA/pages/mine/settings/agreements/index"})},I=()=>{m({url:"/packageA/pages/mine/settings/agreements/privacy-policy"})},P=()=>{m({url:"/packageA/pages/mine/about/index"})},S=()=>{m({url:"/packageA/pages/mine/settings/network/index"})},$=a(!1),E=a("计算中..."),G=async()=>{try{E.value=K(Object.keys(localStorage).reduce(((e,s)=>e+localStorage[s].length),0)),E.value||(E.value="0B")}catch(e){console.error("获取缓存大小失败:",e),E.value="获取失败"}},K=e=>e<1024?e+"B":e<1048576?(e/1024).toFixed(2)+"KB":(e/1024/1024).toFixed(2)+"MB",M=async()=>{if("获取失败"!==E.value)if("0B"!==E.value){if(!$.value)try{$.value=!0,await new Promise((e=>setTimeout(e,1500))),await _(),await G(),f({title:"清理成功",icon:"success"})}catch{f({title:"清理失败",icon:"error"})}finally{$.value=!1}}else f({title:"暂无缓存需要清理",icon:"none",duration:2e3});else f({title:"获取缓存信息失败，请稍后重试",icon:"none",duration:2e3})},O=()=>{v({title:"提示",content:"确定要退出登录吗？",success:function(e){e.confirm&&(b.logout(),f({title:"已退出登录",icon:"success"}))}})};return l((()=>{y()&&G()})),(e,s)=>{const i=c(r("wd-cell"),j),a=c(r("wd-cell-group"),w),l=c(r("wd-button"),x),m=o,f=k;return u(),t(m,{class:"settings-container"},{default:n((()=>[p(a,null,{default:n((()=>[p(i,{title:"个人资料",icon:"user","is-link":"",onClick:h,class:"is-link"}),p(i,{title:"账号和安全",icon:"secured","is-link":"",onClick:A,class:"is-link"}),p(i,{title:"主题设置",icon:"setting1","is-link":"",onClick:B,class:"is-link"}),p(i,{title:"用户协议",icon:"user","is-link":"",onClick:F,class:"is-link"}),p(i,{title:"隐私政策",icon:"folder","is-link":"",onClick:I,class:"is-link"}),p(i,{title:"关于可我不敌可爱",icon:"info","is-link":"",onClick:P,class:"is-link"})])),_:1}),p(a,{"custom-style":"margin-top:40rpx"},{default:n((()=>[p(i,{title:"网络测试",icon:"wifi","is-link":"",onClick:S,class:"is-link"}),p(i,{title:"清空缓存",icon:"delete1",value:E.value,clickable:"",onClick:M,class:"clickable"},null,8,["value"])])),_:1}),C.value?(u(),t(m,{key:0,class:"logout-section"},{default:n((()=>[p(l,{class:"logout-btn",onClick:O},{default:n((()=>[g("退出登录")])),_:1})])),_:1})):d("",!0),$.value?(u(),t(m,{key:1,class:"loading-mask"},{default:n((()=>[p(m,{class:"loading-content"},{default:n((()=>[p(m,{class:"loading-icon"}),p(f,{class:"loading-text"},{default:n((()=>[g("正在清理...")])),_:1})])),_:1})])),_:1})):d("",!0)])),_:1})}}}),[["__scopeId","data-v-b34d16cb"]]);export{C as default};
