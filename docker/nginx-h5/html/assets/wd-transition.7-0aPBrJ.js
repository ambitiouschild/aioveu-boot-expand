import{d as e,h as a,l,ab as t,k as v,a as n,b as s,o as u,i as r,f as o,n as i,w as c,v as d}from"./index-5U173LQ3.js";import{m as $,b as w,c as f,M as m,i as y,t as C,v as p}from"./wd-icon.CDbxLjoy.js";import{_ as b}from"./_plugin-vue_export-helper.BCo6x5W8.js";const h=b(e({name:"wd-transition",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...f,show:w(!1),duration:{type:[Object,Number,Boolean],default:300},lazyRender:w(!1),name:[String,Array],destroy:w(!0),enterClass:$(""),enterActiveClass:$(""),enterToClass:$(""),leaveClass:$(""),leaveActiveClass:$(""),leaveToClass:$("")},emits:["click","before-enter","enter","before-leave","leave","after-leave","after-enter"],setup(e,{emit:$}){const w=e=>{let a=`${f.enterClass} ${f.enterActiveClass}`,l=`${f.enterToClass} ${f.enterActiveClass}`,t=`${f.leaveClass} ${f.leaveActiveClass}`,v=`${f.leaveToClass} ${f.leaveActiveClass}`;if(Array.isArray(e))for(let n=0;n<e.length;n++)a=`wd-${e[n]}-enter wd-${e[n]}-enter-active ${a}`,l=`wd-${e[n]}-enter-to wd-${e[n]}-enter-active ${l}`,t=`wd-${e[n]}-leave wd-${e[n]}-leave-active ${t}`,v=`wd-${e[n]}-leave-to wd-${e[n]}-leave-active ${v}`;else e&&(a=`wd-${e}-enter wd-${e}-enter-active ${a}`,l=`wd-${e}-enter-to wd-${e}-enter-active ${l}`,t=`wd-${e}-leave wd-${e}-leave-active ${t}`,v=`wd-${e}-leave-to wd-${e}-leave-active ${v}`);return{enter:a,"enter-to":l,leave:t,"leave-to":v}},f=e,b=$,h=a(!1),A=a(!1),T=a(""),k=a(!1),_=a(300),j=a(""),g=a(null),x=a(null),z=a(null),I=l((()=>`-webkit-transition-duration:${_.value}ms;transition-duration:${_.value}ms;${A.value||!f.destroy?"":"display: none;"}${f.customStyle}`)),R=l((()=>`wd-transition ${f.customClass}  ${j.value}`));function S(){b("click")}function B(){g.value=new m((async e=>{try{const a=w(f.name),l=y(f.duration)?f.duration.enter:f.duration;T.value="enter",b("before-enter"),x.value=C(),await x.value,b("enter"),j.value=a.enter,_.value=l,x.value=C(),await x.value,h.value=!0,A.value=!0,x.value=C(),await x.value,x.value=null,k.value=!1,j.value=a["enter-to"],e()}catch(a){}}))}function G(){k.value||(k.value=!0,"leave"===T.value?b("after-leave"):"enter"===T.value&&b("after-enter"),!f.show&&A.value&&(A.value=!1))}return t((()=>{f.show&&B()})),v((()=>f.show),(e=>{e?(p(g.value)&&g.value.abort(),p(x.value)&&x.value.abort(),p(z.value)&&z.value.abort(),g.value=null,x.value=null,z.value=null,B()):async function(){if(!g.value)return k.value=!1,G();try{if(await g.value,!A.value)return;const e=w(f.name),a=y(f.duration)?f.duration.leave:f.duration;T.value="leave",b("before-leave"),_.value=a,z.value=C(),await z.value,b("leave"),j.value=e.leave,z.value=C(),await z.value,k.value=!1,j.value=e["leave-to"],z.value=function(e){return new m((a=>{const l=setTimeout((()=>{clearTimeout(l),a()}),e)}))}(_.value),await z.value,z.value=null,G(),g.value=null}catch(e){}}()}),{deep:!0}),(e,a)=>{const l=r;return!e.lazyRender||h.value?(u(),n(l,{key:0,class:i(R.value),style:o(I.value),onTransitionend:G,onClick:S},{default:c((()=>[d(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])):s("",!0)}}}),[["__scopeId","data-v-1fc69211"]]);export{h as w};
