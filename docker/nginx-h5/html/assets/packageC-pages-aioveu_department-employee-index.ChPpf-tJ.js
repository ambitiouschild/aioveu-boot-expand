import{d as e,h as a,y as l,Y as t,z as s,a as u,w as o,i,o as d,e as n,b as c,s as f,g as r,t as v,a4 as m,a6 as p,a0 as _,c as g,F as y,r as b,X as k,$ as h,aa as N}from"./index-5U173LQ3.js";import{A as I}from"./aioveu-employee.CCWXpWw-.js";import{A as C}from"./aioveu-department.Ni2j20Wl.js";import{A}from"./aioveu-position.5P-apEWx.js";import{D as j}from"./dict.R0KYYCD_.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";const D=x(e({__name:"index",setup(e){const x=a(!1),D=a([]),w=a(0),E=a(!1),P=l({pageNum:1,pageSize:10}),V=a([]),z=a([]),S=a([]),O=a([]),U=a(-1),F=a(-1),$=a(-1),B=a(-1),G=a(-1),L=a([]),M=["ç¦»èŒ","åœ¨èŒ","ä¼‘å‡","å®žä¹ "],R=()=>{E.value=!E.value},X=e=>{var a;const l=e.detail.value;U.value=l,P.name=(null==(a=z.value[l])?void 0:a.employeeName)||""},Y=e=>{const a=e.detail.value;F.value=a,P.gender=a},q=e=>{const a=e.detail.value;$.value=a,S.value[a]&&(P.deptId=S.value[a].deptId)},H=e=>{const a=e.detail.value;B.value=a,O.value[a]&&(P.positionId=O.value[a].positionId)},J=e=>{const a=e.detail.value;G.value=a,P.status=a},K=()=>{x.value=!0,I.getPage(P).then((e=>{V.value=e.list,w.value=e.total})).finally((()=>{x.value=!1}))},Q=()=>{P.pageNum=1,P.employeeId=void 0,P.empCode="",P.name="",P.gender=void 0,P.deptId=void 0,P.positionId=void 0,P.status=void 0,U.value=-1,F.value=-1,$.value=-1,B.value=-1,G.value=-1,V.value=[],K()},T=()=>{P.pageNum>1&&(P.pageNum--,K())},W=()=>{P.pageNum*P.pageSize<w.value&&(P.pageNum++,K())},Z=a(!1);t((()=>{Z.value&&(K(),Z.value=!1)}));const ee=e=>{Z.value=!0;let a="/packageC/pages/aioveu_department/employee/form";e&&(a+=`?employeeId=${e}`),console.log("è·³è½¬URL:",a),k({url:a})},ae=e=>{const a=e?[e]:D.value;0!==a.length?N({title:"æç¤º",content:"ç¡®è®¤åˆ é™¤é€‰ä¸­çš„å‘˜å·¥å—ï¼Ÿ",success:e=>{e.confirm&&(x.value=!0,I.deleteByIds(a.join(",")).then((()=>{h({title:"åˆ é™¤æˆåŠŸ",icon:"success"}),Q()})).finally((()=>{x.value=!1})))}}):h({title:"è¯·é€‰æ‹©è¦åˆ é™¤çš„å‘˜å·¥",icon:"none"})},le=e=>{const a=L.value.find((a=>Number(a.value)===e));return a?a.label:"æœªçŸ¥çŠ¶æ€"};return s((()=>{K(),C.getAllDepartmentOptions().then((e=>{Array.isArray(e)&&(S.value=e.map((e=>({deptId:Number(e.deptId),deptName:e.deptName}))))})),A.getAllPositionOptions().then((e=>{Array.isArray(e)&&(O.value=e.map((e=>({positionId:Number(e.positionId),positionName:e.positionName}))))})),I.getAllEmployeeOptions().then((e=>{Array.isArray(e)&&(z.value=e)})),j.getDictItems("gender").then((e=>{L.value=e})).catch((e=>{console.error("åŠ è½½æ€§åˆ«çŠ¶æ€é€‰é¡¹å¤±è´¥:",e)}))})),(e,a)=>{const l=f,t=i,s=m,k=p,h=_;return d(),u(t,{class:"app-container"},{default:o((()=>[n(t,{class:"search-container"},{default:o((()=>[n(t,{class:"filter-header",onClick:R},{default:o((()=>[n(l,null,{default:o((()=>[r("ðŸ” ç­›é€‰æ¡ä»¶")])),_:1}),n(l,null,{default:o((()=>[r(v(E.value?"â–²":"â–¼"),1)])),_:1})])),_:1}),E.value?(d(),u(t,{key:0,class:"filter-content"},{default:o((()=>[n(t,{class:"filter-item"},{default:o((()=>[n(l,{class:"filter-label"},{default:o((()=>[r("å‘˜å·¥ID")])),_:1}),n(s,{type:"text",class:"filter-input",placeholder:"è¯·è¾“å…¥å‘˜å·¥ID",modelValue:P.employeeId,"onUpdate:modelValue":a[0]||(a[0]=e=>P.employeeId=e),onConfirm:K},null,8,["modelValue"])])),_:1}),n(t,{class:"filter-item"},{default:o((()=>[n(l,{class:"filter-label"},{default:o((()=>[r("å‘˜å·¥ç¼–å·")])),_:1}),n(s,{type:"text",class:"filter-input",placeholder:"è¯·è¾“å…¥å‘˜å·¥ç¼–å·",modelValue:P.empCode,"onUpdate:modelValue":a[1]||(a[1]=e=>P.empCode=e),onConfirm:K},null,8,["modelValue"])])),_:1}),n(t,{class:"filter-item"},{default:o((()=>[n(l,{class:"filter-label"},{default:o((()=>[r("å§“å")])),_:1}),n(k,{class:"filter-picker",mode:"selector",range:z.value,"range-key":"employeeName",value:U.value,onChange:X},{default:o((()=>[n(t,{class:"picker-view"},{default:o((()=>[r(v(U.value>=0?z.value[U.value].employeeName:"è¯·é€‰æ‹©å§“å"),1)])),_:1})])),_:1},8,["range","value"])])),_:1}),n(t,{class:"filter-item"},{default:o((()=>[n(l,{class:"filter-label"},{default:o((()=>[r("æ€§åˆ«")])),_:1}),n(k,{class:"filter-picker",mode:"selector",range:L.value,"range-key":"label",value:F.value,onChange:Y},{default:o((()=>[n(t,{class:"picker-view"},{default:o((()=>[r(v(F.value>=0?L.value[F.value].label:"è¯·é€‰æ‹©æ€§åˆ«"),1)])),_:1})])),_:1},8,["range","value"])])),_:1}),n(t,{class:"filter-item"},{default:o((()=>[n(l,{class:"filter-label"},{default:o((()=>[r("æ‰€å±žéƒ¨é—¨")])),_:1}),n(k,{class:"filter-picker",mode:"selector",range:S.value,"range-key":"deptName",value:$.value,onChange:q},{default:o((()=>[n(t,{class:"picker-view"},{default:o((()=>[r(v($.value>=0?S.value[$.value].deptName:"è¯·é€‰æ‹©éƒ¨é—¨"),1)])),_:1})])),_:1},8,["range","value"])])),_:1}),n(t,{class:"filter-item"},{default:o((()=>[n(l,{class:"filter-label"},{default:o((()=>[r("æ‰€å±žå²—ä½")])),_:1}),n(k,{class:"filter-picker",mode:"selector",range:O.value,"range-key":"positionName",value:B.value,onChange:H},{default:o((()=>[n(t,{class:"picker-view"},{default:o((()=>[r(v(B.value>=0?O.value[B.value].positionName:"è¯·é€‰æ‹©å²—ä½"),1)])),_:1})])),_:1},8,["range","value"])])),_:1}),n(t,{class:"filter-item"},{default:o((()=>[n(l,{class:"filter-label"},{default:o((()=>[r("çŠ¶æ€")])),_:1}),n(k,{class:"filter-picker",mode:"selector",range:M,value:G.value,onChange:J},{default:o((()=>[n(t,{class:"picker-view"},{default:o((()=>[r(v(G.value>=0?M[G.value]:"è¯·é€‰æ‹©çŠ¶æ€"),1)])),_:1})])),_:1},8,["value"])])),_:1}),n(t,{class:"filter-buttons"},{default:o((()=>[n(h,{class:"filter-btn reset",onClick:Q},{default:o((()=>[r("é‡ç½®")])),_:1}),n(h,{class:"filter-btn confirm",onClick:K},{default:o((()=>[r("æœç´¢")])),_:1})])),_:1})])),_:1})):c("",!0)])),_:1}),n(t,{class:"action-buttons"},{default:o((()=>[n(h,{"v-has-perm":["aioveuEmployee:aioveuProcurement-employee:add"],class:"action-btn add",onClick:a[2]||(a[2]=e=>ee())},{default:o((()=>[n(l,null,{default:o((()=>[r("+")])),_:1}),n(l,null,{default:o((()=>[r("æ–°å¢ž")])),_:1})])),_:1}),n(h,{"v-has-perm":["aioveuEmployee:aioveuProcurement-employee:delete"],class:"action-btn delete",disabled:0===D.value.length,onClick:ae},{default:o((()=>[n(l,null,{default:o((()=>[r("ðŸ—‘ï¸")])),_:1}),n(l,null,{default:o((()=>[r("åˆ é™¤")])),_:1})])),_:1},8,["disabled"])])),_:1}),n(t,{class:"list-container"},{default:o((()=>[x.value?(d(),u(t,{key:0,class:"loading-state"},{default:o((()=>[n(l,null,{default:o((()=>[r("åŠ è½½ä¸­...")])),_:1})])),_:1})):0===V.value.length?(d(),u(t,{key:1,class:"empty-state"},{default:o((()=>[n(l,{class:"empty-icon"},{default:o((()=>[r("ðŸ“")])),_:1}),n(l,{class:"empty-text"},{default:o((()=>[r("æš‚æ— å‘˜å·¥æ•°æ®")])),_:1})])),_:1})):(d(!0),g(y,{key:2},b(V.value,(e=>(d(),u(t,{key:e.employeeId,class:"employee-card"},{default:o((()=>[n(t,{class:"card-header"},{default:o((()=>[n(l,{class:"employee-name"},{default:o((()=>[r(v(e.name),1)])),_:2},1024),n(l,{class:"employee-id"},{default:o((()=>[r("ID: "+v(e.employeeId),1)])),_:2},1024)])),_:2},1024),n(t,{class:"card-content"},{default:o((()=>[n(t,{class:"info-item"},{default:o((()=>[n(l,{class:"info-label"},{default:o((()=>[r("å‘˜å·¥ç¼–å·:")])),_:1}),n(l,{class:"info-value"},{default:o((()=>[r(v(e.empCode),1)])),_:2},1024)])),_:2},1024),n(t,{class:"info-item"},{default:o((()=>[n(l,{class:"info-label"},{default:o((()=>[r("æ€§åˆ«:")])),_:1}),n(l,{class:"info-value"},{default:o((()=>[r(v(le(e.gender)),1)])),_:2},1024)])),_:2},1024),n(t,{class:"info-item"},{default:o((()=>[n(l,{class:"info-label"},{default:o((()=>[r("æ‰‹æœºå·ç :")])),_:1}),n(l,{class:"info-value"},{default:o((()=>[r(v(e.phone),1)])),_:2},1024)])),_:2},1024),n(t,{class:"info-item"},{default:o((()=>[n(l,{class:"info-label"},{default:o((()=>[r("éƒ¨é—¨:")])),_:1}),n(l,{class:"info-value"},{default:o((()=>[r(v(e.deptName),1)])),_:2},1024)])),_:2},1024),n(t,{class:"info-item"},{default:o((()=>[n(l,{class:"info-label"},{default:o((()=>[r("å²—ä½:")])),_:1}),n(l,{class:"info-value"},{default:o((()=>[r(v(e.positionName),1)])),_:2},1024)])),_:2},1024),n(t,{class:"info-item"},{default:o((()=>[n(l,{class:"info-label"},{default:o((()=>[r("çŠ¶æ€:")])),_:1}),n(l,{class:"info-value"},{default:o((()=>{return[r(v((a=e.status,M[a]||"æœªçŸ¥çŠ¶æ€")),1)];var a})),_:2},1024)])),_:2},1024)])),_:2},1024),n(t,{class:"card-footer"},{default:o((()=>[n(h,{"v-has-perm":["aioveuEmployee:aioveuProcurement-employee:edit"],class:"action-btn edit",onClick:a=>ee(e.employeeId)},{default:o((()=>[n(l,null,{default:o((()=>[r("âœï¸")])),_:1}),n(l,null,{default:o((()=>[r("ç¼–è¾‘")])),_:1})])),_:2},1032,["onClick"]),n(h,{"v-has-perm":["aioveuEmployee:aioveuProcurement-employee:delete"],class:"action-btn delete",onClick:a=>ae(e.employeeId)},{default:o((()=>[n(l,null,{default:o((()=>[r("ðŸ—‘ï¸")])),_:1}),n(l,null,{default:o((()=>[r("åˆ é™¤")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128)),w.value>0?(d(),u(t,{key:3,class:"pagination"},{default:o((()=>[n(h,{class:"pagination-btn",disabled:P.pageNum<=1,onClick:T},{default:o((()=>[r(" ä¸Šä¸€é¡µ ")])),_:1},8,["disabled"]),n(l,{class:"page-info"},{default:o((()=>[r(v(P.pageNum)+" / "+v(Math.ceil(w.value/P.pageSize)),1)])),_:1}),n(h,{class:"pagination-btn",disabled:P.pageNum*P.pageSize>=w.value,onClick:W},{default:o((()=>[r(" ä¸‹ä¸€é¡µ ")])),_:1},8,["disabled"])])),_:1})):c("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-d1367e0e"]]);export{D as default};
