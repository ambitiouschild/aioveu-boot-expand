import{d as e,aC as a,l,h as s,k as o,ab as r,a as t,o as i,w as n,b as u,e as d,i as c,f as p,n as m,v as f,s as h,g,t as v,a5 as b}from"./index-5U173LQ3.js";import{m as x,b as y,x as _,a as w,d as $,c as C,f as k,o as S,_ as j,t as T}from"./wd-icon.CDbxLjoy.js";import{u as V}from"./useCell.qN6vSEvF.js";import{F as W}from"./types.Prh_CF5p.js";import{u as I}from"./useParent.Bak0uCS8.js";import{u as P}from"./useTranslate.Kg86_MV8.js";import{_ as B}from"./_plugin-vue_export-helper.BCo6x5W8.js";const E=B(e({name:"wd-textarea",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...C,customTextareaContainerClass:x(""),customTextareaClass:x(""),customLabelClass:x(""),modelValue:$(""),placeholder:String,placeholderStyle:String,placeholderClass:x(""),disabled:y(!1),maxlength:w(-1),autoFocus:y(!1),focus:y(!1),autoHeight:y(!1),fixed:y(!1),cursorSpacing:w(0),cursor:w(-1),confirmType:String,confirmHold:y(!1),showConfirmBar:y(!0),selectionStart:w(-1),selectionEnd:w(-1),adjustPosition:y(!0),disableDefaultPadding:y(!1),holdKeyboard:y(!1),showPassword:y(!1),clearable:y(!1),readonly:y(!1),prefixIcon:String,showWordLimit:y(!1),label:String,labelWidth:x(""),size:String,error:y(!1),center:y(!1),noBorder:y(!1),required:y(!1),prop:x(""),rules:_(),clearTrigger:x("always"),focusWhenClear:y(!0),ignoreCompositionEvent:y(!0),inputmode:x("text")},emits:["update:modelValue","clear","blur","focus","input","keyboardheightchange","confirm","linechange","clickprefixicon","click"],setup(e,{emit:x}){const{translate:y}=P("textarea"),_=e,w=x,$=a(),C=l((()=>k(_.placeholder)?_.placeholder:y("placeholder"))),B=s(!1),E=s(!1),H=s(!1),L=s(""),q=V();o((()=>_.focus),(e=>{E.value=e}),{immediate:!0,deep:!0}),o((()=>_.modelValue),(e=>{L.value=k(e)?String(e):""}),{immediate:!0,deep:!0});const{parent:F}=I(W),z=l((()=>{const{disabled:e,readonly:a,clearable:l,clearTrigger:s}=_;return!(!l||a||e||!L.value||!("always"===s||"focus"===_.clearTrigger&&H.value))})),A=l((()=>{const{disabled:e,readonly:a,maxlength:l,showWordLimit:s}=_;return Boolean(!e&&!a&&k(l)&&l>-1&&s)})),K=l((()=>F&&_.prop&&F.errorMessages&&F.errorMessages[_.prop]?F.errorMessages[_.prop]:"")),M=l((()=>{let e=!1;if(F&&F.props.rules){const a=F.props.rules;for(const l in a)Object.prototype.hasOwnProperty.call(a,l)&&l===_.prop&&Array.isArray(a[l])&&(e=a[l].some((e=>e.required)))}return _.required||_.rules.some((e=>e.required))||e})),D=l((()=>Array.from(String(Q(_.modelValue)||"")).length)),O=l((()=>`wd-textarea   ${_.label||$.label?"is-cell":""} ${_.center?"is-center":""} ${q.border.value?"is-border":""} ${_.size?"is-"+_.size:""} ${_.error?"is-error":""} ${_.disabled?"is-disabled":""} ${_.autoHeight?"is-auto-height":""} ${D.value>0?"is-not-empty":""}  ${_.noBorder?"is-no-border":""} ${_.customClass}`)),G=l((()=>`wd-textarea__label ${_.customLabelClass} ${M.value?"is-required":""}`)),U=l((()=>`wd-textarea__placeholder  ${_.placeholderClass}`)),J=l((()=>`${D.value>0?"wd-textarea__count-current":""} ${D.value>_.maxlength?"is-error":""}`)),N=l((()=>_.labelWidth?S({"min-width":_.labelWidth,"max-width":_.labelWidth}):""));function Q(e){const{maxlength:a,showWordLimit:l}=_;return l&&-1!==a&&String(e).length>a?e.toString().substring(0,a):`${e}`}async function R(){B.value=!0,H.value=!1,L.value="",_.focusWhenClear&&(E.value=!1),await T(),_.focusWhenClear&&(E.value=!0,H.value=!0),w("update:modelValue",L.value),w("clear")}async function X({detail:e}){await T(150),B.value?B.value=!1:(H.value=!1,w("blur",{value:L.value,cursor:e.cursor?e.cursor:null}))}function Y({detail:e}){H.value=!0,w("focus",e)}function Z({detail:e}){L.value=Q(L.value),w("update:modelValue",L.value),w("input",e)}function ee({detail:e}){w("keyboardheightchange",e)}function ae({detail:e}){w("confirm",e)}function le({detail:e}){w("linechange",e)}function se(){w("clickprefixicon")}return r((()=>{L.value=Q(L.value),w("update:modelValue",L.value)})),(e,a)=>{const l=c,s=h,o=b;return i(),t(l,{class:m(O.value),style:p(e.customStyle)},{default:n((()=>[e.label||e.$slots.label?(i(),t(l,{key:0,class:m(G.value),style:p(N.value)},{default:n((()=>[e.prefixIcon||e.$slots.prefix?(i(),t(l,{key:0,class:"wd-textarea__prefix"},{default:n((()=>[e.prefixIcon&&!e.$slots.prefix?(i(),t(j,{key:0,"custom-class":"wd-textarea__icon",name:e.prefixIcon,onClick:se},null,8,["name"])):f(e.$slots,"prefix",{key:1},void 0,!0)])),_:3})):u("",!0),d(l,{class:"wd-textarea__label-inner"},{default:n((()=>[e.label&&!e.$slots.label?(i(),t(s,{key:0},{default:n((()=>[g(v(e.label),1)])),_:1})):f(e.$slots,"label",{key:1},void 0,!0)])),_:3})])),_:3},8,["class","style"])):u("",!0),d(l,{class:m(`wd-textarea__value ${z.value?"is-suffix":""} ${e.customTextareaContainerClass} ${A.value?"is-show-limit":""}`)},{default:n((()=>[d(o,{class:m(`wd-textarea__inner ${e.customTextareaClass}`),modelValue:L.value,"onUpdate:modelValue":a[0]||(a[0]=e=>L.value=e),"show-count":!1,placeholder:C.value,disabled:e.disabled||e.readonly,maxlength:e.maxlength,focus:E.value,"auto-focus":e.autoFocus,"placeholder-style":e.placeholderStyle,"placeholder-class":U.value,"auto-height":e.autoHeight,"cursor-spacing":e.cursorSpacing,fixed:e.fixed,cursor:e.cursor,"show-confirm-bar":e.showConfirmBar,"selection-start":e.selectionStart,"selection-end":e.selectionEnd,"adjust-position":e.adjustPosition,"hold-keyboard":e.holdKeyboard,"confirm-type":e.confirmType,"confirm-hold":e.confirmHold,"disable-default-padding":e.disableDefaultPadding,ignoreCompositionEvent:e.ignoreCompositionEvent,inputmode:e.inputmode,onInput:Z,onFocus:Y,onBlur:X,onConfirm:ae,onLinechange:le,onKeyboardheightchange:ee},null,8,["class","modelValue","placeholder","disabled","maxlength","focus","auto-focus","placeholder-style","placeholder-class","auto-height","cursor-spacing","fixed","cursor","show-confirm-bar","selection-start","selection-end","adjust-position","hold-keyboard","confirm-type","confirm-hold","disable-default-padding","ignoreCompositionEvent","inputmode"]),K.value?(i(),t(l,{key:0,class:"wd-textarea__error-message"},{default:n((()=>[g(v(K.value),1)])),_:1})):u("",!0),_.readonly?(i(),t(l,{key:1,class:"wd-textarea__readonly-mask"})):u("",!0),d(l,{class:"wd-textarea__suffix"},{default:n((()=>[z.value?(i(),t(j,{key:0,"custom-class":"wd-textarea__clear",name:"error-fill",onClick:R})):u("",!0),A.value?(i(),t(l,{key:1,class:"wd-textarea__count"},{default:n((()=>[d(s,{class:m(J.value)},{default:n((()=>[g(v(D.value),1)])),_:1},8,["class"]),g(" /"+v(e.maxlength),1)])),_:1})):u("",!0)])),_:1})])),_:1},8,["class"])])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-e3f25283"]]);export{E as _};
