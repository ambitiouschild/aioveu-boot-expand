import{d as e,h as a,y as l,Y as t,z as s,a as i,w as o,$ as u,i as n,o as d,e as c,b as f,s as r,g as p,t as v,a4 as _,a6 as m,a0 as g,c as b,F as h,r as k,X as N,aa as y,aI as I,aJ as C}from"./index-5U173LQ3.js";import{A as w}from"./aioveu-position.5P-apEWx.js";import{A}from"./aioveu-department.Ni2j20Wl.js";import{D as x}from"./dict.R0KYYCD_.js";import{_ as D}from"./_plugin-vue_export-helper.BCo6x5W8.js";const j=D(e({__name:"index",setup(e){const D=a(!1),j=a([]),P=a(0),V=a(!1),z=l({pageNum:1,pageSize:10}),S=a([]),L=a([]),F=a([]),O=a([]),T=a(-1),U=a(-1),$=a(-1),B=a(void 0),E=()=>{V.value=!V.value},J=e=>{const a=e.detail.value;T.value=a,L.value[a]&&(z.positionName=L.value[a].positionName)},M=e=>{const a=e.detail.value;U.value=a,F.value[a]&&(z.deptId=F.value[a].deptId)},X=e=>{const a=e.detail.value;$.value=a,O.value[a]&&(z.positionLevel=Number(O.value[a].value))},Y=()=>{D.value=!0,w.getPage(z).then((e=>{S.value=e.list,P.value=e.total})).catch((e=>{console.error("æŸ¥è¯¢å²—ä½å¤±è´¥:",e),u({title:"åŠ è½½æ•°æ®å¤±è´¥",icon:"none"})})).finally((()=>{D.value=!1}))},q=()=>{z.pageNum=1,z.positionName="",z.deptId=void 0,z.positionLevel=void 0,z.description="",T.value=-1,U.value=-1,$.value=-1,S.value=[],Y()},G=()=>{z.pageNum>1&&(z.pageNum--,Y())},H=()=>{z.pageNum*z.pageSize<P.value&&(z.pageNum++,Y())},K=a(!1);t((()=>{K.value&&(Y(),K.value=!1)}));const Q=e=>{K.value=!0,B.value=e;let a="/packageC/pages/aioveu_department/position/form";void 0!==e&&(a+=`?id=${e}`),console.log("è·³è½¬åˆ°:",a),N({url:a})},R=e=>{const a=e?[e]:j.value;0!==a.length?y({title:"æç¤º",content:"ç¡®è®¤åˆ é™¤é€‰ä¸­çš„å²—ä½å—ï¼Ÿ",success:e=>{e.confirm&&(I({title:"åˆ é™¤ä¸­..."}),w.deleteByIds(a.join(",")).then((()=>{u({title:"åˆ é™¤æˆåŠŸ",icon:"success"}),q()})).catch((e=>{console.error("åˆ é™¤å¤±è´¥:",e),u({title:"åˆ é™¤å¤±è´¥",icon:"none"})})).finally((()=>C())))}}):u({title:"è¯·é€‰æ‹©è¦åˆ é™¤çš„å²—ä½",icon:"none"})},W=e=>{const a=O.value.find((a=>Number(a.value)===e));return a?a.label:"æœªçŸ¥"};return s((()=>{Y(),w.getAllPositionOptions().then((e=>{Array.isArray(e)&&(L.value=e.map((e=>({positionId:Number(e.positionId),positionName:e.positionName}))))})).catch((e=>{console.error("åŠ è½½å²—ä½é€‰é¡¹å¤±è´¥:",e),u({title:"åŠ è½½å²—ä½åˆ—è¡¨å¤±è´¥",icon:"none"})})),A.getAllDepartmentOptions().then((e=>{Array.isArray(e)&&(F.value=e.map((e=>({deptId:Number(e.deptId),deptName:e.deptName}))))})).catch((e=>{console.error("åŠ è½½éƒ¨é—¨é€‰é¡¹å¤±è´¥:",e),u({title:"åŠ è½½éƒ¨é—¨åˆ—è¡¨å¤±è´¥",icon:"none"})})),x.getDictItems("position_level").then((e=>{O.value=e}))})),(e,a)=>{const l=r,t=n,s=_,u=m,N=g;return d(),i(t,{class:"app-container"},{default:o((()=>[c(t,{class:"search-container"},{default:o((()=>[c(t,{class:"filter-header",onClick:E},{default:o((()=>[c(l,null,{default:o((()=>[p("ðŸ” ç­›é€‰æ¡ä»¶")])),_:1}),c(l,null,{default:o((()=>[p(v(V.value?"â–²":"â–¼"),1)])),_:1})])),_:1}),V.value?(d(),i(t,{key:0,class:"filter-content"},{default:o((()=>[c(t,{class:"filter-item"},{default:o((()=>[c(l,{class:"filter-label"},{default:o((()=>[p("å²—ä½ID")])),_:1}),c(s,{type:"text",class:"filter-input",placeholder:"è¯·è¾“å…¥å²—ä½ID",modelValue:z.positionId,"onUpdate:modelValue":a[0]||(a[0]=e=>z.positionId=e),onConfirm:Y},null,8,["modelValue"])])),_:1}),c(t,{class:"filter-item"},{default:o((()=>[c(l,{class:"filter-label"},{default:o((()=>[p("å²—ä½åç§°")])),_:1}),c(u,{class:"filter-picker",mode:"selector",range:L.value,"range-key":"positionName",value:T.value,onChange:J},{default:o((()=>[c(t,{class:"picker-view"},{default:o((()=>[p(v(T.value>=0?L.value[T.value].positionName:"è¯·é€‰æ‹©å²—ä½åç§°"),1)])),_:1})])),_:1},8,["range","value"])])),_:1}),c(t,{class:"filter-item"},{default:o((()=>[c(l,{class:"filter-label"},{default:o((()=>[p("æ‰€å±žéƒ¨é—¨")])),_:1}),c(u,{class:"filter-picker",mode:"selector",range:F.value,"range-key":"deptName",value:U.value,onChange:M},{default:o((()=>[c(t,{class:"picker-view"},{default:o((()=>[p(v(U.value>=0?F.value[U.value].deptName:"è¯·é€‰æ‹©æ‰€å±žéƒ¨é—¨"),1)])),_:1})])),_:1},8,["range","value"])])),_:1}),c(t,{class:"filter-item"},{default:o((()=>[c(l,{class:"filter-label"},{default:o((()=>[p("èŒçº§")])),_:1}),c(u,{class:"filter-picker",mode:"selector",range:O.value,"range-key":"label",value:$.value,onChange:X},{default:o((()=>[c(t,{class:"picker-view"},{default:o((()=>[p(v($.value>=0?O.value[$.value].label:"è¯·é€‰æ‹©èŒçº§"),1)])),_:1})])),_:1},8,["range","value"])])),_:1}),c(t,{class:"filter-item"},{default:o((()=>[c(l,{class:"filter-label"},{default:o((()=>[p("å²—ä½æè¿°")])),_:1}),c(s,{type:"text",class:"filter-input",placeholder:"è¯·è¾“å…¥å²—ä½æè¿°",modelValue:z.description,"onUpdate:modelValue":a[1]||(a[1]=e=>z.description=e),onConfirm:Y},null,8,["modelValue"])])),_:1}),c(t,{class:"filter-buttons"},{default:o((()=>[c(N,{class:"filter-btn reset",onClick:q},{default:o((()=>[p("é‡ç½®")])),_:1}),c(N,{class:"filter-btn confirm",onClick:Y},{default:o((()=>[p("æœç´¢")])),_:1})])),_:1})])),_:1})):f("",!0)])),_:1}),c(t,{class:"action-buttons"},{default:o((()=>[c(N,{"v-has-perm":["aioveuPosition:aioveu-position:add"],class:"action-btn add",onClick:a[2]||(a[2]=e=>Q())},{default:o((()=>[c(l,null,{default:o((()=>[p("+")])),_:1}),c(l,null,{default:o((()=>[p("æ–°å¢ž")])),_:1})])),_:1}),c(N,{"v-has-perm":["aioveuPosition:aioveu-position:delete"],class:"action-btn delete",disabled:0===j.value.length,onClick:a[3]||(a[3]=e=>R())},{default:o((()=>[c(l,null,{default:o((()=>[p("ðŸ—‘ï¸")])),_:1}),c(l,null,{default:o((()=>[p("åˆ é™¤")])),_:1})])),_:1},8,["disabled"])])),_:1}),c(t,{class:"list-container"},{default:o((()=>[D.value?(d(),i(t,{key:0,class:"loading-state"},{default:o((()=>[c(l,null,{default:o((()=>[p("åŠ è½½ä¸­...")])),_:1})])),_:1})):0===S.value.length?(d(),i(t,{key:1,class:"empty-state"},{default:o((()=>[c(l,{class:"empty-icon"},{default:o((()=>[p("ðŸ‘”")])),_:1}),c(l,{class:"empty-text"},{default:o((()=>[p("æš‚æ— å²—ä½æ•°æ®")])),_:1})])),_:1})):(d(!0),b(h,{key:2},k(S.value,(e=>(d(),i(t,{key:e.positionId,class:"position-card"},{default:o((()=>[c(t,{class:"card-header"},{default:o((()=>[c(l,{class:"position-id"},{default:o((()=>[p("ID: "+v(e.positionId),1)])),_:2},1024),c(l,{class:"position-name"},{default:o((()=>[p(v(e.positionName),1)])),_:2},1024)])),_:2},1024),c(t,{class:"card-content"},{default:o((()=>[c(t,{class:"info-row"},{default:o((()=>[c(l,{class:"info-label"},{default:o((()=>[p("æ‰€å±žéƒ¨é—¨:")])),_:1}),c(l,{class:"info-value"},{default:o((()=>[p(v(e.deptName),1)])),_:2},1024)])),_:2},1024),c(t,{class:"info-row"},{default:o((()=>[c(l,{class:"info-label"},{default:o((()=>[p("èŒçº§:")])),_:1}),c(l,{class:"info-value"},{default:o((()=>[p(v(W(e.positionLevel)),1)])),_:2},1024)])),_:2},1024),c(t,{class:"info-row"},{default:o((()=>[c(l,{class:"info-label"},{default:o((()=>[p("å²—ä½æè¿°:")])),_:1}),c(l,{class:"info-value"},{default:o((()=>[p(v(e.description||"-"),1)])),_:2},1024)])),_:2},1024),c(t,{class:"info-row"},{default:o((()=>[c(l,{class:"info-label"},{default:o((()=>[p("åˆ›å»ºæ—¶é—´:")])),_:1}),c(l,{class:"info-value"},{default:o((()=>[p(v(e.createTime),1)])),_:2},1024)])),_:2},1024),c(t,{class:"info-row"},{default:o((()=>[c(l,{class:"info-label"},{default:o((()=>[p("æ›´æ–°æ—¶é—´:")])),_:1}),c(l,{class:"info-value"},{default:o((()=>[p(v(e.updateTime),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),c(t,{class:"card-footer"},{default:o((()=>[c(t,{class:"action-buttons"},{default:o((()=>[c(N,{"v-has-perm":["aioveuPosition:aioveu-position:edit"],class:"action-btn edit",onClick:a=>Q(e.positionId)},{default:o((()=>[c(l,null,{default:o((()=>[p("âœï¸")])),_:1}),c(l,null,{default:o((()=>[p("ç¼–è¾‘")])),_:1})])),_:2},1032,["onClick"]),c(N,{"v-has-perm":["aioveuPosition:aioveu-position:delete"],class:"action-btn delete",onClick:a=>R(e.positionId)},{default:o((()=>[c(l,null,{default:o((()=>[p("ðŸ—‘ï¸")])),_:1}),c(l,null,{default:o((()=>[p("åˆ é™¤")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),P.value>0?(d(),i(t,{key:3,class:"pagination"},{default:o((()=>[c(N,{class:"pagination-btn",disabled:z.pageNum<=1,onClick:G},{default:o((()=>[p(" ä¸Šä¸€é¡µ ")])),_:1},8,["disabled"]),c(l,{class:"page-info"},{default:o((()=>[p(v(z.pageNum)+" / "+v(Math.ceil(P.value/z.pageSize)),1)])),_:1}),c(N,{class:"pagination-btn",disabled:z.pageNum*z.pageSize>=P.value,onClick:H},{default:o((()=>[p(" ä¸‹ä¸€é¡µ ")])),_:1},8,["disabled"])])),_:1})):f("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-b907eb0b"]]);export{j as default};
