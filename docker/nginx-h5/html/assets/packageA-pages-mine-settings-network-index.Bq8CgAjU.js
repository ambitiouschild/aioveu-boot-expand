import{d as a,h as e,l as s,z as t,ar as l,a as u,w as n,as as c,i as d,o,e as i,s as r,g as f,n as v,u as _,t as y,b as w,f as m,a0 as p,at as b}from"./index-5U173LQ3.js";import{_ as h}from"./_plugin-vue_export-helper.BCo6x5W8.js";const g=h(a({__name:"index",setup(a){const h=e(""),g=e("获取中..."),k=e(!1),x=e(0),E=e({delay:"--",status:"未测试"});e(null);const L=s((()=>{if("--"===E.value.delay)return"";const a=Number(E.value.delay);return isNaN(a)?"":a<100?"good":a<300?"normal":"bad"})),I=async()=>{try{const a=await c();h.value=a.networkType,g.value=navigator.connection?`${navigator.connection.effectiveType||"未知"}`:"不支持"}catch{h.value="获取失败",g.value="获取失败"}},N=async()=>{if(k.value)return;k.value=!0,x.value=0,E.value.delay="--",E.value.status="测试中";const a=setInterval((()=>{x.value<90&&(x.value+=10)}),200);try{const a=Date.now();await b({url:"/api/v1/auth/captcha",timeout:5e3});const e=Date.now()-a;E.value.delay=e,E.value.status=e<300?"正常":"较慢"}catch{E.value.delay="--",E.value.status="连接失败"}finally{clearInterval(a),x.value=100,setTimeout((()=>{k.value=!1,x.value=0}),500)}};return t((()=>{I(),window.addEventListener("online",I),window.addEventListener("offline",(()=>{h.value="",g.value="离线"}))})),l((()=>{window.removeEventListener("online",I),window.removeEventListener("offline",I)})),(a,e)=>{const s=r,t=d,l=p;return o(),u(t,{class:"network-container"},{default:n((()=>[i(t,{class:"status-card"},{default:n((()=>[i(t,{class:"status-header"},{default:n((()=>[i(s,{class:"title"},{default:n((()=>[f("网络状态")])),_:1}),i(s,{class:v(["status-badge",_(h)?"online":"offline"])},{default:n((()=>[f(y(_(h)?"在线":"离线"),1)])),_:1},8,["class"])])),_:1}),i(t,{class:"status-info"},{default:n((()=>[i(t,{class:"info-item"},{default:n((()=>[i(s,{class:"label"},{default:n((()=>[f("网络类型：")])),_:1}),i(s,{class:"value"},{default:n((()=>[f(y(_(h)||"未知"),1)])),_:1})])),_:1}),i(t,{class:"info-item"},{default:n((()=>[i(s,{class:"label"},{default:n((()=>[f("网络强度：")])),_:1}),i(s,{class:"value"},{default:n((()=>[f(y(_(g)),1)])),_:1})])),_:1})])),_:1})])),_:1}),i(t,{class:"test-card"},{default:n((()=>[i(t,{class:"test-header"},{default:n((()=>[i(s,{class:"title"},{default:n((()=>[f("网络测试")])),_:1}),i(s,{class:"subtitle"},{default:n((()=>[f("测试服务器连接情况")])),_:1})])),_:1}),i(t,{class:"test-content"},{default:n((()=>[i(t,{class:"test-item"},{default:n((()=>[i(s,{class:"label"},{default:n((()=>[f("延迟：")])),_:1}),i(s,{class:"value"},{default:n((()=>[f(y(_(E).delay)+"ms",1)])),_:1}),i(s,{class:v(["status",_(L)])},{default:n((()=>[f(y(_(E).status),1)])),_:1},8,["class"])])),_:1}),_(k)?(o(),u(t,{key:0,class:"progress-bar"},{default:n((()=>[i(t,{class:"progress",style:m({width:`${_(x)}%`})},null,8,["style"])])),_:1})):w("",!0),i(l,{class:"test-btn",disabled:_(k),onClick:N},{default:n((()=>[f(y(_(k)?"测试中...":"开始测试"),1)])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-52c88198"]]);export{g as default};
