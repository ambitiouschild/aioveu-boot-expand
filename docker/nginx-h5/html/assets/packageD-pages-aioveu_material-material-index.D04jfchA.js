import{d as a,h as e,y as l,Y as t,z as s,a as u,w as i,i as o,o as c,e as d,b as n,s as f,g as r,t as _,a4 as m,a6 as v,a0 as p,c as g,F as b,r as y,X as k,$ as h,aa as N,aI as C,aJ as w}from"./index-5U173LQ3.js";import{A as I}from"./aioveu-material.D870okzX.js";import{A as x}from"./aioveu-category.DEnk_6py.js";import{D as V}from"./dict.R0KYYCD_.js";import{_ as D}from"./_plugin-vue_export-helper.BCo6x5W8.js";const A=D(a({__name:"index",setup(a){const D=e(!1),A=e([]),j=e(0),P=e(!1),S=l({pageNum:1,pageSize:10}),z=e([]),M=e([]),U=e([]),T=e(-1),$=e(-1),B=()=>{P.value=!P.value},F=a=>{const e=a.detail.value;T.value=e,M.value[e]&&(S.categoryName=M.value[e].categoryName)},J=a=>{const e=a.detail.value;$.value=e,U.value[e]&&(S.isActive=Number(U.value[e].value))},K=()=>{D.value=!0,I.getPage(S).then((a=>{z.value=a.list,j.value=a.total})).finally((()=>{D.value=!1}))},L=()=>{S.pageNum=1,S.name="",S.categoryName="",S.barcode="",T.value=-1,$.value=-1,z.value=[],K()},O=()=>{S.pageNum>1&&(S.pageNum--,K())},X=()=>{S.pageNum*S.pageSize<j.value&&(S.pageNum++,K())},Y=e(!1);t((()=>{Y.value&&(K(),Y.value=!1)}));const q=a=>{Y.value=!0;let e="/packageD/pages/aioveu_material/material/form";void 0!==a&&(e+=`?id=${a}`),k({url:e})},E=a=>{const e=a?[a]:A.value;0!==e.length?N({title:"æç¤º",content:"ç¡®è®¤åˆ é™¤é€‰ä¸­çš„ç‰©èµ„å—ï¼Ÿ",success:a=>{a.confirm&&(C({title:"åˆ é™¤ä¸­..."}),I.deleteByIds(e.join(",")).then((()=>{h({title:"åˆ é™¤æˆåŠŸ",icon:"success"}),L()})).finally((()=>w())))}}):h({title:"è¯·é€‰æ‹©è¦åˆ é™¤çš„ç‰©èµ„",icon:"none"})},G=a=>{const e=U.value.find((e=>Number(e.value)===a));return e?e.label:"æœªçŸ¥çŠ¶æ€"};return s((()=>{K(),x.getAllCategoryOptions().then((a=>{Array.isArray(a)&&(M.value=a.map((a=>({categoryId:Number(a.categoryId),categoryName:a.categoryName}))))})),V.getDictItems("material_is_active").then((a=>{U.value=a}))})),(a,e)=>{const l=f,t=o,s=m,k=v,h=p;return c(),u(t,{class:"app-container"},{default:i((()=>[d(t,{class:"search-container"},{default:i((()=>[d(t,{class:"filter-header",onClick:B},{default:i((()=>[d(l,null,{default:i((()=>[r("ðŸ” ç­›é€‰æ¡ä»¶")])),_:1}),d(l,null,{default:i((()=>[r(_(P.value?"â–²":"â–¼"),1)])),_:1})])),_:1}),P.value?(c(),u(t,{key:0,class:"filter-content"},{default:i((()=>[d(t,{class:"filter-item"},{default:i((()=>[d(l,{class:"filter-label"},{default:i((()=>[r("ç‰©èµ„ID")])),_:1}),d(s,{type:"text",class:"filter-input",placeholder:"è¯·è¾“å…¥ç‰©èµ„ID",modelValue:S.id,"onUpdate:modelValue":e[0]||(e[0]=a=>S.id=a),onConfirm:K},null,8,["modelValue"])])),_:1}),d(t,{class:"filter-item"},{default:i((()=>[d(l,{class:"filter-label"},{default:i((()=>[r("ç‰©èµ„åç§°")])),_:1}),d(s,{type:"text",class:"filter-input",placeholder:"è¯·è¾“å…¥ç‰©èµ„åç§°",modelValue:S.name,"onUpdate:modelValue":e[1]||(e[1]=a=>S.name=a),onConfirm:K},null,8,["modelValue"])])),_:1}),d(t,{class:"filter-item"},{default:i((()=>[d(l,{class:"filter-label"},{default:i((()=>[r("ç‰©èµ„åˆ†ç±»")])),_:1}),d(k,{class:"filter-picker",mode:"selector",range:M.value,"range-key":"categoryName",value:T.value,onChange:F},{default:i((()=>[d(t,{class:"picker-view"},{default:i((()=>[r(_(T.value>=0?M.value[T.value].categoryName:"è¯·é€‰æ‹©åˆ†ç±»"),1)])),_:1})])),_:1},8,["range","value"])])),_:1}),d(t,{class:"filter-item"},{default:i((()=>[d(l,{class:"filter-label"},{default:i((()=>[r("å¯ç”¨çŠ¶æ€")])),_:1}),d(k,{class:"filter-picker",mode:"selector",range:U.value,"range-key":"label",value:$.value,onChange:J},{default:i((()=>[d(t,{class:"picker-view"},{default:i((()=>[r(_($.value>=0?U.value[$.value].label:"è¯·é€‰æ‹©çŠ¶æ€"),1)])),_:1})])),_:1},8,["range","value"])])),_:1}),d(t,{class:"filter-item"},{default:i((()=>[d(l,{class:"filter-label"},{default:i((()=>[r("å•†å“æ¡ç ")])),_:1}),d(s,{type:"text",class:"filter-input",placeholder:"è¯·è¾“å…¥å•†å“æ¡ç ",modelValue:S.barcode,"onUpdate:modelValue":e[2]||(e[2]=a=>S.barcode=a),onConfirm:K},null,8,["modelValue"])])),_:1}),d(t,{class:"filter-buttons"},{default:i((()=>[d(h,{class:"filter-btn reset",onClick:L},{default:i((()=>[r("é‡ç½®")])),_:1}),d(h,{class:"filter-btn confirm",onClick:K},{default:i((()=>[r("æœç´¢")])),_:1})])),_:1})])),_:1})):n("",!0)])),_:1}),d(t,{class:"action-buttons"},{default:i((()=>[d(h,{"v-has-perm":["aioveuMaterial:aioveuProcurement-material:add"],class:"action-btn add",onClick:e[3]||(e[3]=a=>q())},{default:i((()=>[d(l,null,{default:i((()=>[r("+")])),_:1}),d(l,null,{default:i((()=>[r("æ–°å¢ž")])),_:1})])),_:1}),d(h,{"v-has-perm":["aioveuMaterial:aioveuProcurement-material:delete"],class:"action-btn delete",disabled:0===A.value.length,onClick:e[4]||(e[4]=a=>E())},{default:i((()=>[d(l,null,{default:i((()=>[r("ðŸ—‘ï¸")])),_:1}),d(l,null,{default:i((()=>[r("åˆ é™¤")])),_:1})])),_:1},8,["disabled"])])),_:1}),d(t,{class:"list-container"},{default:i((()=>[D.value?(c(),u(t,{key:0,class:"loading-state"},{default:i((()=>[d(l,null,{default:i((()=>[r("åŠ è½½ä¸­...")])),_:1})])),_:1})):0===z.value.length?(c(),u(t,{key:1,class:"empty-state"},{default:i((()=>[d(l,{class:"empty-icon"},{default:i((()=>[r("ðŸ“")])),_:1}),d(l,{class:"empty-text"},{default:i((()=>[r("æš‚æ— ç‰©èµ„æ•°æ®")])),_:1})])),_:1})):(c(!0),g(b,{key:2},y(z.value,(a=>(c(),u(t,{key:a.id,class:"material-card"},{default:i((()=>[d(t,{class:"card-header"},{default:i((()=>[d(l,{class:"material-id"},{default:i((()=>[r("ID: "+_(a.id),1)])),_:2},1024),d(l,{class:"material-name"},{default:i((()=>[r(_(a.name),1)])),_:2},1024)])),_:2},1024),d(t,{class:"card-content"},{default:i((()=>[d(t,{class:"info-row"},{default:i((()=>[d(l,{class:"info-label"},{default:i((()=>[r("åˆ†ç±»:")])),_:1}),d(l,{class:"info-value"},{default:i((()=>[r(_(a.categoryName),1)])),_:2},1024)])),_:2},1024),d(t,{class:"info-row"},{default:i((()=>[d(l,{class:"info-label"},{default:i((()=>[r("å•ä½:")])),_:1}),d(l,{class:"info-value"},{default:i((()=>[r(_(a.unit),1)])),_:2},1024)])),_:2},1024),d(t,{class:"info-row"},{default:i((()=>[d(l,{class:"info-label"},{default:i((()=>[r("è§„æ ¼åž‹å·:")])),_:1}),d(l,{class:"info-value"},{default:i((()=>[r(_(a.spec),1)])),_:2},1024)])),_:2},1024),d(t,{class:"info-row"},{default:i((()=>[d(l,{class:"info-label"},{default:i((()=>[r("é‡‡è´­å•ä»·:")])),_:1}),d(l,{class:"info-value"},{default:i((()=>[r(_(a.purchasePrice),1)])),_:2},1024)])),_:2},1024),d(t,{class:"info-row"},{default:i((()=>[d(l,{class:"info-label"},{default:i((()=>[r("ä¾›åº”å•†ID:")])),_:1}),d(l,{class:"info-value"},{default:i((()=>[r(_(a.supplierId),1)])),_:2},1024)])),_:2},1024),d(t,{class:"info-row"},{default:i((()=>[d(l,{class:"info-label"},{default:i((()=>[r("åº“å­˜èŒƒå›´:")])),_:1}),d(l,{class:"info-value"},{default:i((()=>[r(_(a.minStock)+" - "+_(a.maxStock),1)])),_:2},1024)])),_:2},1024),d(t,{class:"info-row"},{default:i((()=>[d(l,{class:"info-label"},{default:i((()=>[r("å¯ç”¨çŠ¶æ€:")])),_:1}),d(l,{class:"info-value"},{default:i((()=>[r(_(G(a.isActive)),1)])),_:2},1024)])),_:2},1024),d(t,{class:"info-row"},{default:i((()=>[d(l,{class:"info-label"},{default:i((()=>[r("å•†å“æ¡ç :")])),_:1}),d(l,{class:"info-value"},{default:i((()=>[r(_(a.barcode),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),d(t,{class:"card-footer"},{default:i((()=>[d(t,{class:"time-info"},{default:i((()=>[d(l,null,{default:i((()=>[r("åˆ›å»º: "+_(a.createTime),1)])),_:2},1024),d(l,null,{default:i((()=>[r("æ›´æ–°: "+_(a.updateTime),1)])),_:2},1024)])),_:2},1024),d(t,{class:"action-buttons"},{default:i((()=>[d(h,{"v-has-perm":["aioveuMaterial:aioveuProcurement-material:edit"],class:"action-btn edit",onClick:e=>q(a.id)},{default:i((()=>[d(l,null,{default:i((()=>[r("âœï¸")])),_:1}),d(l,null,{default:i((()=>[r("ç¼–è¾‘")])),_:1})])),_:2},1032,["onClick"]),d(h,{"v-has-perm":["aioveuMaterial:aioveuProcurement-material:delete"],class:"action-btn delete",onClick:e=>E(a.id)},{default:i((()=>[d(l,null,{default:i((()=>[r("ðŸ—‘ï¸")])),_:1}),d(l,null,{default:i((()=>[r("åˆ é™¤")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),j.value>0?(c(),u(t,{key:3,class:"pagination"},{default:i((()=>[d(h,{class:"pagination-btn",disabled:S.pageNum<=1,onClick:O},{default:i((()=>[r(" ä¸Šä¸€é¡µ ")])),_:1},8,["disabled"]),d(l,{class:"page-info"},{default:i((()=>[r(_(S.pageNum)+" / "+_(Math.ceil(j.value/S.pageSize)),1)])),_:1}),d(h,{class:"pagination-btn",disabled:S.pageNum*S.pageSize>=j.value,onClick:X},{default:i((()=>[r(" ä¸‹ä¸€é¡µ ")])),_:1},8,["disabled"])])),_:1})):n("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-e1fd2145"]]);export{A as default};
