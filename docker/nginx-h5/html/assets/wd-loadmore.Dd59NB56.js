import{d as e,aE as o,h as s,j as a,l as t,k as l,ab as n,ar as u,a as i,b as r,o as d,w as c,e as p,v as m,i as f,c as v,F as _,r as w,n as y,s as g,g as b,t as h,f as x,P as k,E as C,G as $,u as S,a1 as T,aA as K,aG as j}from"./index-5U173LQ3.js";import{w as P}from"./wd-popup.BsbILK4T.js";import{a as I,b as z,m as V,c as N,x as G,_ as O,y as B,f as E,u as F,h as H,l as M,p as Q}from"./wd-icon.CDbxLjoy.js";import{q as A,r as L,p as q,c as D}from"./clickoutside.C7ctyI5d.js";import{u as U}from"./useParent.Bak0uCS8.js";import{_ as J}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{u as R}from"./useChildren.Crbe03ZE.js";import{_ as W}from"./wd-divider.DIyXdxGw.js";import{w as X}from"./wd-overlay.iGBdgU4M.js";import{u as Y}from"./useTranslate.Kg86_MV8.js";const Z=Symbol("wd-drop-menu"),ee={...N,zIndex:I(12),direction:V("down"),modal:z(!0),closeOnClickModal:z(!0),duration:I(200)},oe=J(e({name:"wd-drop-menu-item",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...N,customTitle:V(""),customIcon:V(""),modelValue:[String,Number],options:G(),disabled:z(!1),iconName:V("check"),title:String,icon:V("arrow-down"),iconSize:V("14px"),beforeToggle:Function,valueKey:V("value"),labelKey:V("label"),tipKey:V("tip"),customPopupClass:V(""),customPopupStyle:V("")},emits:["change","update:modelValue","open","opened","closed","close"],setup(e,{expose:k,emit:C}){const $=e,S=C,T=o(A,null),K=s(!1),j=s(!1),I=s(),z=s(12),V=s(!0),N=s(!0),G=s(0),{parent:F}=U(Z),{proxy:H}=a(),M=t((()=>{let e="";return e=K.value&&F?"down"===F.props.direction?`top: calc(var(--window-top) + ${F.offset.value}px); bottom: 0;`:`top: 0; bottom: calc(var(--window-bottom) + ${F.offset.value}px)`:"",e}));function Q(){j.value&&(B($.beforeToggle)?$.beforeToggle({status:!1,resolve:e=>{e&&D()}}):D())}function D(){j.value&&(j.value=!1)}function J(){j.value||(B($.beforeToggle)?$.beforeToggle({status:!0,resolve:e=>{e&&R()}}):R())}function R(){K.value=!0,j.value=!0,F&&(V.value=Boolean(F.props.modal),G.value=Number(F.props.duration),N.value=Boolean(F.props.closeOnClickModal),I.value="down"===F.props.direction?"top":"bottom"),S("open")}function W(){K.value=!1,S("closed")}function X(){S("open")}function Y(){S("opened")}function ee(){S("close")}return l((()=>$.modelValue),(e=>{E(e)&&"number"!=typeof e&&"string"!=typeof e&&console.error("[wot-design] warning(wd-drop-menu-item): the type of value should be a number or a string.")}),{deep:!0,immediate:!0}),n((()=>{T&&T.pushToQueue?T.pushToQueue(H):q(H)})),u((()=>{T&&T.removeFromQueue?T.removeFromQueue(H):L(H)})),k({getShowPop:function(){return j.value},open:J,close:Q,toggle:function(){j.value?Q():J()}}),(e,o)=>{const s=g,a=f;return K.value?(d(),i(a,{key:0,class:y(`wd-drop-item  ${e.customClass}`),style:x(`z-index: ${z.value}; ${M.value};${e.customStyle}`)},{default:c((()=>[p(P,{modelValue:j.value,"onUpdate:modelValue":o[0]||(o[0]=e=>j.value=e),"z-index":z.value,duration:G.value,position:I.value,"custom-style":`position: absolute; max-height: 80%;${e.customPopupStyle}`,"custom-class":e.customPopupClass,"modal-style":"position: absolute;",modal:V.value,"close-on-click-modal":!1,onClickModal:o[1]||(o[1]=e=>N.value&&Q()),onBeforeEnter:X,onAfterEnter:Y,onBeforeLeave:ee,onAfterLeave:W},{default:c((()=>[e.options.length?(d(),i(a,{key:0},{default:c((()=>[(d(!0),v(_,null,w(e.options,((o,t)=>(d(),i(a,{key:t,onClick:e=>function(e){if($.disabled)return;const{valueKey:o}=$,s=$.options[e],a=void 0!==s[o]?s[o]:s;S("update:modelValue",a),S("change",{value:a,selectedItem:s}),Q()}(t),class:y("wd-drop-item__option "+((""!==o[e.valueKey]?o[e.valueKey]:o)===e.modelValue?"is-active":""))},{default:c((()=>[p(a,{class:y(`wd-drop-item__title ${e.customTitle}`)},{default:c((()=>[p(s,null,{default:c((()=>[b(h(o[e.labelKey]?o[e.labelKey]:o),1)])),_:2},1024),o[e.tipKey]?(d(),i(s,{key:0,class:"wd-drop-item__tip"},{default:c((()=>[b(h(o[e.tipKey]),1)])),_:2},1024)):r("",!0)])),_:2},1032,["class"]),(""!==o[e.valueKey]?o[e.valueKey]:o)===e.modelValue?(d(),i(O,{key:0,name:e.iconName,size:"20px",class:y(`wd-drop-item__icon ${e.customIcon}`)},null,8,["name","class"])):r("",!0)])),_:2},1032,["onClick","class"])))),128))])),_:1})):m(e.$slots,"default",{key:1},void 0,!0)])),_:3},8,["modelValue","z-index","duration","position","custom-style","custom-class","modal"])])),_:3},8,["class","style"])):r("",!0)}}}),[["__scopeId","data-v-900ce007"]]),se=J(e({name:"wd-drop-menu",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:ee,setup(e){const t=e,u=o(A,null),r=s(`dropMenuId${F()}`),g=s(0),K=s(0),{proxy:j}=a(),{linkChildren:P,children:I}=R(Z);function z(e){e.preventDefault(),e.stopPropagation()}function V(e){const{title:o,modelValue:s,options:a,valueKey:t,labelKey:l}=e;if(o)return o;for(let n=0,u=a.length;n<u;n++)if(s===a[n][t])return a[n][l];console.error("[wot-design] warning(wd-drop-menu-item): no value is matched in the options option.")}function N(e){H(`#${r.value}`,!1,j).then((o=>{if(!o)return;const{top:s,bottom:a}=o;"down"===t.direction?g.value=Number(a):g.value=K.value-Number(s),e.$.exposed.toggle()}))}return P({props:t,fold:N,offset:g}),l((()=>t.direction),(e=>{["up","down"].includes(e)||console.error("[wot design] warning(wd-drop-menu): direction must be 'up' or 'down'")}),{deep:!0,immediate:!0}),n((()=>{K.value=k().windowHeight})),(e,o)=>{const s=f,a=C($("wd-icon"),O);return d(),i(s,{style:x(e.customStyle),class:y(`wd-drop-menu ${e.customClass}`),onClick:T(z,["stop"]),id:r.value},{default:c((()=>[p(s,{class:"wd-drop-menu__list"},{default:c((()=>[(d(!0),v(_,null,w(S(I),((e,o)=>(d(),i(s,{key:o,onClick:o=>function(e){e&&!e.disabled&&(u&&u.closeOther?u.closeOther(e):D(e),N(e))}(e),class:y(`wd-drop-menu__item ${e.disabled?"is-disabled":""} ${e.$.exposed.getShowPop()?"is-active":""}`)},{default:c((()=>[p(s,{class:"wd-drop-menu__item-title"},{default:c((()=>[p(s,{class:"wd-drop-menu__item-title-text"},{default:c((()=>[b(h(V(e)),1)])),_:2},1024),p(a,{name:e.icon,size:e.iconSize,"custom-class":"wd-drop-menu__arrow"},null,8,["name","size"])])),_:2},1024)])),_:2},1032,["onClick","class"])))),128))])),_:1}),m(e.$slots,"default",{},void 0,!0)])),_:3},8,["style","class","id"])}}}),[["__scopeId","data-v-0eef0830"]]),ae=J(e({name:"wd-loadmore",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...N,state:String,loadingText:String,finishedText:String,errorText:String,loadingProps:Object},emits:["reload"],setup(e,{emit:o}){const a=t((()=>{const e=E(l.loadingProps)?M(l.loadingProps,Q):{};return e.customClass=`wd-loadmore__loading ${e.customClass||""}`,e})),l=e,n=o,{translate:u}=Y("loadmore"),m=s(null);function w(){"error"===l.state&&(m.value="loading",n("reload"))}return(e,o)=>{const s=g,t=f;return d(),i(t,{class:y(["wd-loadmore",e.customClass]),style:x(e.customStyle),onClick:w},{default:c((()=>["finished"===e.state?(d(),i(W,{key:0},{default:c((()=>[b(h(e.finishedText||S(u)("finished")),1)])),_:1})):r("",!0),"error"===e.state?(d(),v(_,{key:1},[p(s,{class:"wd-loadmore__text"},{default:c((()=>[b(h(e.errorText||S(u)("error")),1)])),_:1}),p(s,{class:"wd-loadmore__text is-light"},{default:c((()=>[b(h(S(u)("retry")),1)])),_:1}),p(O,{name:"refresh","custom-class":"wd-loadmore__refresh"})],64)):r("",!0),"loading"===e.state?(d(),v(_,{key:2},[p(X,K(j(a.value)),null,16),p(s,{class:"wd-loadmore__text"},{default:c((()=>[b(h(e.loadingText||S(u)("loading")),1)])),_:1})],64)):r("",!0)])),_:1},8,["class","style"])}}}),[["__scopeId","data-v-39e46161"]]);export{oe as _,se as a,ae as b};
