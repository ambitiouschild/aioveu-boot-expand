import{d as a,h as e,y as l,Y as t,z as s,a as u,w as n,$ as o,i as c,o as i,e as f,b as d,s as r,g as v,t as _,a4 as m,a6 as p,a0 as b,c as g,F as N,r as y,X as h,aa as k,aI as w,aJ as C}from"./index-5U173LQ3.js";import{A as I}from"./aioveu-transaction.BId28B5W.js";import{A}from"./aioveu-customer.MhylDKEJ.js";import{A as D}from"./aioveu-contact.B_5Ds4O-.js";import{D as S}from"./dict.R0KYYCD_.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";const T=x(a({__name:"index",setup(a){const x=e(!1),T=e([]),j=e(0),V=e(!1),z=l({pageNum:1,pageSize:10}),M=e([]),O=e([]),P=e([]),R=e([]),U=e([]),X=e([]),Y=e([]),$=e(-1),q=e(-1),B=e(-1),E=e(-1),F=e(-1),J=e(-1),G=e(void 0),H=()=>{V.value=!V.value},K=a=>{const e=a.detail.value;$.value=e,O.value[e]&&(z.customerName=O.value[e].customerName)},L=a=>{const e=a.detail.value;q.value=e,P.value[e]&&(z.contactName=P.value[e].contactName)},Q=a=>{const e=a.detail.value;B.value=e,R.value[e]&&(z.paymentMethod=Number(R.value[e].value))},W=a=>{const e=a.detail.value;E.value=e,U.value[e]&&(z.paymentStatus=Number(U.value[e].value))},Z=a=>{const e=a.detail.value;F.value=e,X.value[e]&&(z.transactionType=Number(X.value[e].value))},aa=a=>{const e=a.detail.value;J.value=e,Y.value[e]&&(z.transactionStatus=Number(Y.value[e].value))},ea=()=>{x.value=!0,I.getPage(z).then((a=>{M.value=a.list,j.value=a.total})).catch((a=>{console.error("æŸ¥è¯¢äº¤æ˜“è®°å½•å¤±è´¥:",a),o({title:"åŠ è½½æ•°æ®å¤±è´¥",icon:"none"})})).finally((()=>{x.value=!1}))},la=()=>{z.pageNum=1,z.transactionNo="",z.customerName="",z.contactName="",z.paymentMethod=void 0,z.paymentStatus=void 0,z.transactionType=void 0,z.transactionStatus=void 0,$.value=-1,q.value=-1,B.value=-1,E.value=-1,F.value=-1,J.value=-1,M.value=[],ea()},ta=()=>{z.pageNum>1&&(z.pageNum--,ea())},sa=()=>{z.pageNum*z.pageSize<j.value&&(z.pageNum++,ea())},ua=e(!1);t((()=>{ua.value&&(ea(),ua.value=!1)}));const na=a=>{ua.value=!0,G.value=a;let e="/packageE/pages/aioveu_customer/transaction/form";void 0!==a&&(e+=`?id=${a}`),h({url:e})},oa=a=>{const e=a?[a]:T.value;0!==e.length?k({title:"æç¤º",content:"ç¡®è®¤åˆ é™¤é€‰ä¸­çš„äº¤æ˜“è®°å½•å—ï¼Ÿ",success:a=>{a.confirm&&(w({title:"åˆ é™¤ä¸­..."}),I.deleteByIds(e.join(",")).then((()=>{o({title:"åˆ é™¤æˆåŠŸ",icon:"success"}),la()})).catch((a=>{console.error("åˆ é™¤å¤±è´¥:",a),o({title:"åˆ é™¤å¤±è´¥",icon:"none"})})).finally((()=>C())))}}):o({title:"è¯·é€‰æ‹©è¦åˆ é™¤çš„äº¤æ˜“è®°å½•",icon:"none"})},ca=a=>{const e=R.value.find((e=>Number(e.value)===a));return e?e.label:"æœªçŸ¥"},ia=a=>{const e=U.value.find((e=>Number(e.value)===a));return e?e.label:"æœªçŸ¥"},fa=a=>{const e=X.value.find((e=>Number(e.value)===a));return e?e.label:"æœªçŸ¥"},da=a=>{const e=Y.value.find((e=>Number(e.value)===a));return e?e.label:"æœªçŸ¥"};return s((()=>{ea(),A.getAllCustomerOptions().then((a=>{Array.isArray(a)&&(O.value=a.map((a=>({customerId:Number(a.customerId),customerName:a.customerName}))))})).catch((a=>{console.error("åŠ è½½å®¢æˆ·é€‰é¡¹å¤±è´¥:",a)})),D.getAllContactOptions().then((a=>{Array.isArray(a)&&(P.value=a.map((a=>({contactId:Number(a.contactId),contactName:a.contactName}))))})).catch((a=>{console.error("åŠ è½½è”ç³»äººé€‰é¡¹å¤±è´¥:",a)})),S.getDictItems("transaction_payment_method").then((a=>{R.value=a})),S.getDictItems("transaction_payment_status").then((a=>{U.value=a})),S.getDictItems("transaction_type").then((a=>{X.value=a})),S.getDictItems("transaction_status").then((a=>{Y.value=a}))})),(a,e)=>{const l=r,t=c,s=m,o=p,h=b;return i(),u(t,{class:"app-container"},{default:n((()=>[f(t,{class:"search-container"},{default:n((()=>[f(t,{class:"filter-header",onClick:H},{default:n((()=>[f(l,null,{default:n((()=>[v("ðŸ” ç­›é€‰æ¡ä»¶")])),_:1}),f(l,null,{default:n((()=>[v(_(V.value?"â–²":"â–¼"),1)])),_:1})])),_:1}),V.value?(i(),u(t,{key:0,class:"filter-content"},{default:n((()=>[f(t,{class:"filter-item"},{default:n((()=>[f(l,{class:"filter-label"},{default:n((()=>[v("äº¤æ˜“ID")])),_:1}),f(s,{type:"text",class:"filter-input",placeholder:"è¯·è¾“å…¥äº¤æ˜“ID",modelValue:z.id,"onUpdate:modelValue":e[0]||(e[0]=a=>z.id=a),onConfirm:ea},null,8,["modelValue"])])),_:1}),f(t,{class:"filter-item"},{default:n((()=>[f(l,{class:"filter-label"},{default:n((()=>[v("äº¤æ˜“ç¼–å·")])),_:1}),f(s,{type:"text",class:"filter-input",placeholder:"è¯·è¾“å…¥äº¤æ˜“ç¼–å·",modelValue:z.transactionNo,"onUpdate:modelValue":e[1]||(e[1]=a=>z.transactionNo=a),onConfirm:ea},null,8,["modelValue"])])),_:1}),f(t,{class:"filter-item"},{default:n((()=>[f(l,{class:"filter-label"},{default:n((()=>[v("å®¢æˆ·")])),_:1}),f(o,{class:"filter-picker",mode:"selector",range:O.value,"range-key":"customerName",value:$.value,onChange:K},{default:n((()=>[f(t,{class:"picker-view"},{default:n((()=>[v(_($.value>=0?O.value[$.value].customerName:"è¯·é€‰æ‹©å®¢æˆ·"),1)])),_:1})])),_:1},8,["range","value"])])),_:1}),f(t,{class:"filter-item"},{default:n((()=>[f(l,{class:"filter-label"},{default:n((()=>[v("è”ç³»äºº")])),_:1}),f(o,{class:"filter-picker",mode:"selector",range:P.value,"range-key":"contactName",value:q.value,onChange:L},{default:n((()=>[f(t,{class:"picker-view"},{default:n((()=>[v(_(q.value>=0?P.value[q.value].contactName:"è¯·é€‰æ‹©è”ç³»äºº"),1)])),_:1})])),_:1},8,["range","value"])])),_:1}),f(t,{class:"filter-item"},{default:n((()=>[f(l,{class:"filter-label"},{default:n((()=>[v("æ”¯ä»˜æ–¹å¼")])),_:1}),f(o,{class:"filter-picker",mode:"selector",range:R.value,"range-key":"label",value:B.value,onChange:Q},{default:n((()=>[f(t,{class:"picker-view"},{default:n((()=>[v(_(B.value>=0?R.value[B.value].label:"è¯·é€‰æ‹©æ”¯ä»˜æ–¹å¼"),1)])),_:1})])),_:1},8,["range","value"])])),_:1}),f(t,{class:"filter-item"},{default:n((()=>[f(l,{class:"filter-label"},{default:n((()=>[v("æ”¯ä»˜çŠ¶æ€")])),_:1}),f(o,{class:"filter-picker",mode:"selector",range:U.value,"range-key":"label",value:E.value,onChange:W},{default:n((()=>[f(t,{class:"picker-view"},{default:n((()=>[v(_(E.value>=0?U.value[E.value].label:"è¯·é€‰æ‹©æ”¯ä»˜çŠ¶æ€"),1)])),_:1})])),_:1},8,["range","value"])])),_:1}),f(t,{class:"filter-item"},{default:n((()=>[f(l,{class:"filter-label"},{default:n((()=>[v("äº¤æ˜“ç±»åž‹")])),_:1}),f(o,{class:"filter-picker",mode:"selector",range:X.value,"range-key":"label",value:F.value,onChange:Z},{default:n((()=>[f(t,{class:"picker-view"},{default:n((()=>[v(_(F.value>=0?X.value[F.value].label:"è¯·é€‰æ‹©äº¤æ˜“ç±»åž‹"),1)])),_:1})])),_:1},8,["range","value"])])),_:1}),f(t,{class:"filter-item"},{default:n((()=>[f(l,{class:"filter-label"},{default:n((()=>[v("äº¤æ˜“çŠ¶æ€")])),_:1}),f(o,{class:"filter-picker",mode:"selector",range:Y.value,"range-key":"label",value:J.value,onChange:aa},{default:n((()=>[f(t,{class:"picker-view"},{default:n((()=>[v(_(J.value>=0?Y.value[J.value].label:"è¯·é€‰æ‹©äº¤æ˜“çŠ¶æ€"),1)])),_:1})])),_:1},8,["range","value"])])),_:1}),f(t,{class:"filter-buttons"},{default:n((()=>[f(h,{class:"filter-btn reset",onClick:la},{default:n((()=>[v("é‡ç½®")])),_:1}),f(h,{class:"filter-btn confirm",onClick:ea},{default:n((()=>[v("æœç´¢")])),_:1})])),_:1})])),_:1})):d("",!0)])),_:1}),f(t,{class:"action-buttons"},{default:n((()=>[f(h,{"v-has-perm":["aioveuTransaction:aioveu-transaction:add"],class:"action-btn add",onClick:e[2]||(e[2]=a=>na())},{default:n((()=>[f(l,null,{default:n((()=>[v("+")])),_:1}),f(l,null,{default:n((()=>[v("æ–°å¢ž")])),_:1})])),_:1}),f(h,{"v-has-perm":["aioveuTransaction:aioveu-transaction:delete"],class:"action-btn delete",disabled:0===T.value.length,onClick:e[3]||(e[3]=a=>oa())},{default:n((()=>[f(l,null,{default:n((()=>[v("ðŸ—‘ï¸")])),_:1}),f(l,null,{default:n((()=>[v("åˆ é™¤")])),_:1})])),_:1},8,["disabled"])])),_:1}),f(t,{class:"list-container"},{default:n((()=>[x.value?(i(),u(t,{key:0,class:"loading-state"},{default:n((()=>[f(l,null,{default:n((()=>[v("åŠ è½½ä¸­...")])),_:1})])),_:1})):0===M.value.length?(i(),u(t,{key:1,class:"empty-state"},{default:n((()=>[f(l,{class:"empty-icon"},{default:n((()=>[v("ðŸ’°")])),_:1}),f(l,{class:"empty-text"},{default:n((()=>[v("æš‚æ— äº¤æ˜“è®°å½•")])),_:1})])),_:1})):(i(!0),g(N,{key:2},y(M.value,(a=>(i(),u(t,{key:a.id,class:"transaction-card"},{default:n((()=>[f(t,{class:"card-header"},{default:n((()=>[f(l,{class:"transaction-id"},{default:n((()=>[v("ID: "+_(a.id),1)])),_:2},1024),f(l,{class:"transaction-no"},{default:n((()=>[v(_(a.transactionNo),1)])),_:2},1024)])),_:2},1024),f(t,{class:"card-content"},{default:n((()=>[f(t,{class:"info-row"},{default:n((()=>[f(l,{class:"info-label"},{default:n((()=>[v("å®¢æˆ·:")])),_:1}),f(l,{class:"info-value"},{default:n((()=>[v(_(a.customerName),1)])),_:2},1024)])),_:2},1024),f(t,{class:"info-row"},{default:n((()=>[f(l,{class:"info-label"},{default:n((()=>[v("è”ç³»äºº:")])),_:1}),f(l,{class:"info-value"},{default:n((()=>[v(_(a.contactName),1)])),_:2},1024)])),_:2},1024),f(t,{class:"info-row"},{default:n((()=>[f(l,{class:"info-label"},{default:n((()=>[v("äº¤æ˜“æ—¥æœŸ:")])),_:1}),f(l,{class:"info-value"},{default:n((()=>[v(_(a.transactionDate),1)])),_:2},1024)])),_:2},1024),f(t,{class:"info-row"},{default:n((()=>[f(l,{class:"info-label"},{default:n((()=>[v("äº¤æ˜“é‡‘é¢:")])),_:1}),f(l,{class:"info-value"},{default:n((()=>[v(_(a.amount)+" "+_(a.currency),1)])),_:2},1024)])),_:2},1024),f(t,{class:"info-row"},{default:n((()=>[f(l,{class:"info-label"},{default:n((()=>[v("æ”¯ä»˜æ–¹å¼:")])),_:1}),f(l,{class:"info-value"},{default:n((()=>[v(_(ca(a.paymentMethod)),1)])),_:2},1024)])),_:2},1024),f(t,{class:"info-row"},{default:n((()=>[f(l,{class:"info-label"},{default:n((()=>[v("æ”¯ä»˜çŠ¶æ€:")])),_:1}),f(l,{class:"info-value"},{default:n((()=>[v(_(ia(a.paymentStatus)),1)])),_:2},1024)])),_:2},1024),f(t,{class:"info-row"},{default:n((()=>[f(l,{class:"info-label"},{default:n((()=>[v("äº¤æ˜“ç±»åž‹:")])),_:1}),f(l,{class:"info-value"},{default:n((()=>[v(_(fa(a.transactionType)),1)])),_:2},1024)])),_:2},1024),f(t,{class:"info-row"},{default:n((()=>[f(l,{class:"info-label"},{default:n((()=>[v("å‘ç¥¨å·ç :")])),_:1}),f(l,{class:"info-value"},{default:n((()=>[v(_(a.invoiceNo),1)])),_:2},1024)])),_:2},1024),f(t,{class:"info-row"},{default:n((()=>[f(l,{class:"info-label"},{default:n((()=>[v("äº§å“ID:")])),_:1}),f(l,{class:"info-value"},{default:n((()=>[v(_(a.productId),1)])),_:2},1024)])),_:2},1024),f(t,{class:"info-row"},{default:n((()=>[f(l,{class:"info-label"},{default:n((()=>[v("æ•°é‡:")])),_:1}),f(l,{class:"info-value"},{default:n((()=>[v(_(a.quantity),1)])),_:2},1024)])),_:2},1024),f(t,{class:"info-row"},{default:n((()=>[f(l,{class:"info-label"},{default:n((()=>[v("å•ä»·:")])),_:1}),f(l,{class:"info-value"},{default:n((()=>[v(_(a.unitPrice),1)])),_:2},1024)])),_:2},1024),f(t,{class:"info-row"},{default:n((()=>[f(l,{class:"info-label"},{default:n((()=>[v("æŠ˜æ‰£çŽ‡:")])),_:1}),f(l,{class:"info-value"},{default:n((()=>[v(_(a.discount),1)])),_:2},1024)])),_:2},1024),f(t,{class:"info-row"},{default:n((()=>[f(l,{class:"info-label"},{default:n((()=>[v("ç¨ŽçŽ‡:")])),_:1}),f(l,{class:"info-value"},{default:n((()=>[v(_(a.taxRate),1)])),_:2},1024)])),_:2},1024),f(t,{class:"info-row"},{default:n((()=>[f(l,{class:"info-label"},{default:n((()=>[v("ç¨Žé¢:")])),_:1}),f(l,{class:"info-value"},{default:n((()=>[v(_(a.taxAmount),1)])),_:2},1024)])),_:2},1024),f(t,{class:"info-row"},{default:n((()=>[f(l,{class:"info-label"},{default:n((()=>[v("æ€»é‡‘é¢:")])),_:1}),f(l,{class:"info-value"},{default:n((()=>[v(_(a.totalAmount),1)])),_:2},1024)])),_:2},1024),f(t,{class:"info-row"},{default:n((()=>[f(l,{class:"info-label"},{default:n((()=>[v("è´Ÿè´£äºº:")])),_:1}),f(l,{class:"info-value"},{default:n((()=>[v(_(a.salesRepName),1)])),_:2},1024)])),_:2},1024),f(t,{class:"info-row"},{default:n((()=>[f(l,{class:"info-label"},{default:n((()=>[v("äº¤æ˜“çŠ¶æ€:")])),_:1}),f(l,{class:"info-value"},{default:n((()=>[v(_(da(a.transactionStatus)),1)])),_:2},1024)])),_:2},1024),f(t,{class:"info-row"},{default:n((()=>[f(l,{class:"info-label"},{default:n((()=>[v("å¤‡æ³¨:")])),_:1}),f(l,{class:"info-value"},{default:n((()=>[v(_(a.notes),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),f(t,{class:"card-footer"},{default:n((()=>[f(t,{class:"time-info"},{default:n((()=>[f(l,null,{default:n((()=>[v("åˆ›å»º: "+_(a.createTime),1)])),_:2},1024),f(l,null,{default:n((()=>[v("æ›´æ–°: "+_(a.updateTime),1)])),_:2},1024)])),_:2},1024),f(t,{class:"action-buttons"},{default:n((()=>[f(h,{"v-has-perm":["aioveuTransaction:aioveu-transaction:edit"],class:"action-btn edit",onClick:e=>na(a.id)},{default:n((()=>[f(l,null,{default:n((()=>[v("âœï¸")])),_:1}),f(l,null,{default:n((()=>[v("ç¼–è¾‘")])),_:1})])),_:2},1032,["onClick"]),f(h,{"v-has-perm":["aioveuTransaction:aioveu-transaction:delete"],class:"action-btn delete",onClick:e=>oa(a.id)},{default:n((()=>[f(l,null,{default:n((()=>[v("ðŸ—‘ï¸")])),_:1}),f(l,null,{default:n((()=>[v("åˆ é™¤")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),j.value>0?(i(),u(t,{key:3,class:"pagination"},{default:n((()=>[f(h,{class:"pagination-btn",disabled:z.pageNum<=1,onClick:ta},{default:n((()=>[v(" ä¸Šä¸€é¡µ ")])),_:1},8,["disabled"]),f(l,{class:"page-info"},{default:n((()=>[v(_(z.pageNum)+" / "+_(Math.ceil(j.value/z.pageSize)),1)])),_:1}),f(h,{class:"pagination-btn",disabled:z.pageNum*z.pageSize>=j.value,onClick:sa},{default:n((()=>[v(" ä¸‹ä¸€é¡µ ")])),_:1},8,["disabled"])])),_:1})):d("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-9c8cb0aa"]]);export{T as default};
